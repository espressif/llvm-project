; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -mtriple=xtensa -mcpu=esp32 %s -o - | FileCheck %s

define <1 x i1> @test_xtbool_trunc(i32 %a)  {
; CHECK-LABEL: test_xtbool_trunc:
; CHECK:       # %bb.0:
; CHECK-NEXT:    entry a1, 32
; CHECK-NEXT:    rsr a8, br
; CHECK-NEXT:    l32r a9, .LCPI0_0
; CHECK-NEXT:    and a9, a9, a8
; CHECK-NEXT:    or a9, a9, a2
; CHECK-NEXT:    wsr a9, br
; CHECK-NEXT:    retw.n
  %trunc = trunc i32 %a to i1
  %vec = insertelement <1 x i1> poison, i1 %trunc, i64 0
  ret <1 x i1> %vec
}

define i32 @test_xtbool_zext(<1 x i1> %b) {
; CHECK-LABEL: test_xtbool_zext:
; CHECK:       # %bb.0:
; CHECK-NEXT:    entry a1, 32
; CHECK-NEXT:    rsr a8, br
; CHECK-NEXT:    extui a8, a8, 0, 1
; CHECK-NEXT:    movi.n a9, 1
; CHECK-NEXT:    and a2, a8, a9
; CHECK-NEXT:    retw.n
  %bit = extractelement <1 x i1> %b, i64 0
  %int = zext i1 %bit to i32
  ret i32 %int
}
