; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -mtriple=riscv32-esp-unknown-elf  < %s | FileCheck %s

; ModuleID = '/home/chenqian/Workspace/p4-vector-simd-espdsp/dspm_mult_s16/dspm_mult_s16_ansi.c'
source_filename = "/home/chenqian/Workspace/p4-vector-simd-espdsp/dspm_mult_s16/dspm_mult_s16_ansi.c"
target datalayout = "e-m:e-p:32:32-i64:64-n32-S128"
target triple = "riscv32-esp-unknown-elf"

; Function Attrs: nounwind
define dso_local i32 @dspm_mult_s16_ansi(ptr noundef %A, ptr noundef %B, ptr noundef %C, i32 noundef %m, i32 noundef %n, i32 noundef %k, i32 noundef %shift) #0 {
; CHECK-LABEL: define dso_local i32 @dspm_mult_s16_ansi(
; CHECK-SAME: ptr noundef [[A:%.*]], ptr noundef [[B:%.*]], ptr noundef [[C:%.*]], i32 noundef [[M:%.*]], i32 noundef [[N:%.*]], i32 noundef [[K:%.*]], i32 noundef [[SHIFT:%.*]]) #[[ATTR0:[0-9]+]] {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[A_ADDR:%.*]] = alloca ptr, align 4
; CHECK-NEXT:    [[B_ADDR:%.*]] = alloca ptr, align 4
; CHECK-NEXT:    [[C_ADDR:%.*]] = alloca ptr, align 4
; CHECK-NEXT:    [[M_ADDR:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[N_ADDR:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[K_ADDR:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[SHIFT_ADDR:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[FINAL_SHIFT:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[I:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[CLEANUP_DEST_SLOT:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[J:%.*]] = alloca i32, align 4
; CHECK-NEXT:    [[ACC:%.*]] = alloca i64, align 8
; CHECK-NEXT:    [[S:%.*]] = alloca i32, align 4
; CHECK-NEXT:    store ptr [[A]], ptr [[A_ADDR]], align 4, !tbaa [[TBAA6:![0-9]+]]
; CHECK-NEXT:    store ptr [[B]], ptr [[B_ADDR]], align 4, !tbaa [[TBAA6]]
; CHECK-NEXT:    store ptr [[C]], ptr [[C_ADDR]], align 4, !tbaa [[TBAA6]]
; CHECK-NEXT:    store i32 [[M]], ptr [[M_ADDR]], align 4, !tbaa [[TBAA11:![0-9]+]]
; CHECK-NEXT:    store i32 [[N]], ptr [[N_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    store i32 [[K]], ptr [[K_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    store i32 [[SHIFT]], ptr [[SHIFT_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    call void @llvm.lifetime.start.p0(i64 4, ptr [[FINAL_SHIFT]]) #[[ATTR2:[0-9]+]]
; CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[SHIFT_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[SUB:%.*]] = sub nsw i32 [[TMP0]], 15
; CHECK-NEXT:    store i32 [[SUB]], ptr [[FINAL_SHIFT]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    call void @llvm.lifetime.start.p0(i64 4, ptr [[I]]) #[[ATTR2]]
; CHECK-NEXT:    store i32 0, ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    br label %[[FOR_COND:.*]]
; CHECK:       [[FOR_COND]]:
; CHECK-NEXT:    [[TMP1:%.*]] = load i32, ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP2:%.*]] = load i32, ptr [[M_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[CMP:%.*]] = icmp slt i32 [[TMP1]], [[TMP2]]
; CHECK-NEXT:    br i1 [[CMP]], label %[[FOR_BODY:.*]], label %[[FOR_COND_CLEANUP:.*]]
; CHECK:       [[FOR_COND_CLEANUP]]:
; CHECK-NEXT:    store i32 2, ptr [[CLEANUP_DEST_SLOT]], align 4
; CHECK-NEXT:    call void @llvm.lifetime.end.p0(i64 4, ptr [[I]]) #[[ATTR2]]
; CHECK-NEXT:    br label %[[FOR_END36:.*]]
; CHECK:       [[FOR_BODY]]:
; CHECK-NEXT:    call void @llvm.lifetime.start.p0(i64 4, ptr [[J]]) #[[ATTR2]]
; CHECK-NEXT:    store i32 0, ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    br label %[[FOR_COND1:.*]]
; CHECK:       [[FOR_COND1]]:
; CHECK-NEXT:    [[TMP3:%.*]] = load i32, ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr [[K_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[CMP2:%.*]] = icmp slt i32 [[TMP3]], [[TMP4]]
; CHECK-NEXT:    br i1 [[CMP2]], label %[[FOR_BODY4:.*]], label %[[FOR_COND_CLEANUP3:.*]]
; CHECK:       [[FOR_COND_CLEANUP3]]:
; CHECK-NEXT:    store i32 5, ptr [[CLEANUP_DEST_SLOT]], align 4
; CHECK-NEXT:    call void @llvm.lifetime.end.p0(i64 4, ptr [[J]]) #[[ATTR2]]
; CHECK-NEXT:    br label %[[FOR_END33:.*]]
; CHECK:       [[FOR_BODY4]]:
; CHECK-NEXT:    call void @llvm.lifetime.start.p0(i64 8, ptr [[ACC]]) #[[ATTR2]]
; CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr [[SHIFT_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[SHR:%.*]] = ashr i32 32767, [[TMP5]]
; CHECK-NEXT:    [[CONV:%.*]] = sext i32 [[SHR]] to i64
; CHECK-NEXT:    store i64 [[CONV]], ptr [[ACC]], align 8, !tbaa [[TBAA13:![0-9]+]]
; CHECK-NEXT:    call void @llvm.lifetime.start.p0(i64 4, ptr [[S]]) #[[ATTR2]]
; CHECK-NEXT:    store i32 0, ptr [[S]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    br label %[[FOR_COND5:.*]]
; CHECK:       [[FOR_COND5]]:
; CHECK-NEXT:    [[TMP6:%.*]] = load i32, ptr [[S]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP7:%.*]] = load i32, ptr [[N_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[CMP6:%.*]] = icmp slt i32 [[TMP6]], [[TMP7]]
; CHECK-NEXT:    br i1 [[CMP6]], label %[[FOR_BODY9:.*]], label %[[FOR_COND_CLEANUP8:.*]]
; CHECK:       [[FOR_COND_CLEANUP8]]:
; CHECK-NEXT:    store i32 8, ptr [[CLEANUP_DEST_SLOT]], align 4
; CHECK-NEXT:    call void @llvm.lifetime.end.p0(i64 4, ptr [[S]]) #[[ATTR2]]
; CHECK-NEXT:    br label %[[FOR_END:.*]]
; CHECK:       [[FOR_BODY9]]:
; CHECK-NEXT:    [[TMP8:%.*]] = load ptr, ptr [[A_ADDR]], align 4, !tbaa [[TBAA6]]
; CHECK-NEXT:    [[TMP9:%.*]] = load i32, ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP10:%.*]] = load i32, ptr [[N_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[MUL:%.*]] = mul nsw i32 [[TMP9]], [[TMP10]]
; CHECK-NEXT:    [[TMP11:%.*]] = load i32, ptr [[S]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[ADD:%.*]] = add nsw i32 [[MUL]], [[TMP11]]
; CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr inbounds i16, ptr [[TMP8]], i32 [[ADD]]
; CHECK-NEXT:    [[TMP12:%.*]] = load i16, ptr [[ARRAYIDX]], align 2, !tbaa [[TBAA15:![0-9]+]]
; CHECK-NEXT:    [[CONV10:%.*]] = sext i16 [[TMP12]] to i32
; CHECK-NEXT:    [[TMP13:%.*]] = load ptr, ptr [[B_ADDR]], align 4, !tbaa [[TBAA6]]
; CHECK-NEXT:    [[TMP14:%.*]] = load i32, ptr [[S]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP15:%.*]] = load i32, ptr [[K_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[MUL11:%.*]] = mul nsw i32 [[TMP14]], [[TMP15]]
; CHECK-NEXT:    [[TMP16:%.*]] = load i32, ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[ADD12:%.*]] = add nsw i32 [[MUL11]], [[TMP16]]
; CHECK-NEXT:    [[ARRAYIDX13:%.*]] = getelementptr inbounds i16, ptr [[TMP13]], i32 [[ADD12]]
; CHECK-NEXT:    [[TMP17:%.*]] = load i16, ptr [[ARRAYIDX13]], align 2, !tbaa [[TBAA15]]
; CHECK-NEXT:    [[CONV14:%.*]] = sext i16 [[TMP17]] to i32
; CHECK-NEXT:    [[MUL15:%.*]] = mul nsw i32 [[CONV10]], [[CONV14]]
; CHECK-NEXT:    [[CONV16:%.*]] = sext i32 [[MUL15]] to i64
; CHECK-NEXT:    [[TMP18:%.*]] = load i64, ptr [[ACC]], align 8, !tbaa [[TBAA13]]
; CHECK-NEXT:    [[ADD17:%.*]] = add nsw i64 [[TMP18]], [[CONV16]]
; CHECK-NEXT:    store i64 [[ADD17]], ptr [[ACC]], align 8, !tbaa [[TBAA13]]
; CHECK-NEXT:    br label %[[FOR_INC:.*]]
; CHECK:       [[FOR_INC]]:
; CHECK-NEXT:    [[TMP19:%.*]] = load i32, ptr [[S]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[INC:%.*]] = add nsw i32 [[TMP19]], 1
; CHECK-NEXT:    store i32 [[INC]], ptr [[S]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    br label %[[FOR_COND5]], !llvm.loop [[LOOP17:![0-9]+]]
; CHECK:       [[FOR_END]]:
; CHECK-NEXT:    [[TMP20:%.*]] = load i32, ptr [[FINAL_SHIFT]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[CMP18:%.*]] = icmp sgt i32 [[TMP20]], 0
; CHECK-NEXT:    br i1 [[CMP18]], label %[[IF_THEN:.*]], label %[[IF_ELSE:.*]]
; CHECK:       [[IF_THEN]]:
; CHECK-NEXT:    [[TMP21:%.*]] = load i64, ptr [[ACC]], align 8, !tbaa [[TBAA13]]
; CHECK-NEXT:    [[TMP22:%.*]] = load i32, ptr [[FINAL_SHIFT]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[SH_PROM:%.*]] = zext i32 [[TMP22]] to i64
; CHECK-NEXT:    [[SHL:%.*]] = shl i64 [[TMP21]], [[SH_PROM]]
; CHECK-NEXT:    [[CONV20:%.*]] = trunc i64 [[SHL]] to i16
; CHECK-NEXT:    [[TMP35:%.*]] = load ptr, ptr [[C_ADDR]], align 4, !tbaa [[TBAA6]]
; CHECK-NEXT:    [[TMP36:%.*]] = load i32, ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP37:%.*]] = load i32, ptr [[K_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP38:%.*]] = mul nsw i32 [[TMP36]], [[TMP37]]
; CHECK-NEXT:    [[TMP39:%.*]] = load i32, ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP40:%.*]] = add nsw i32 [[TMP38]], [[TMP39]]
; CHECK-NEXT:    [[TMP41:%.*]] = getelementptr inbounds i16, ptr [[TMP35]], i32 [[TMP40]]
; CHECK-NEXT:    store i16 [[CONV20]], ptr [[TMP41]], align 2, !tbaa [[TBAA15]]
; CHECK-NEXT:    br label %[[IF_END:.*]]
; CHECK:       [[IF_ELSE]]:
; CHECK-NEXT:    [[TMP42:%.*]] = load i64, ptr [[ACC]], align 8, !tbaa [[TBAA13]]
; CHECK-NEXT:    [[TMP43:%.*]] = load i32, ptr [[FINAL_SHIFT]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP44:%.*]] = sub nsw i32 0, [[TMP43]]
; CHECK-NEXT:    [[TMP45:%.*]] = zext i32 [[TMP44]] to i64
; CHECK-NEXT:    [[TMP46:%.*]] = ashr i64 [[TMP42]], [[TMP45]]
; CHECK-NEXT:    [[TMP47:%.*]] = trunc i64 [[TMP46]] to i16
; CHECK-NEXT:    [[TMP48:%.*]] = load ptr, ptr [[C_ADDR]], align 4, !tbaa [[TBAA6]]
; CHECK-NEXT:    [[TMP49:%.*]] = load i32, ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP50:%.*]] = load i32, ptr [[K_ADDR]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP51:%.*]] = mul nsw i32 [[TMP49]], [[TMP50]]
; CHECK-NEXT:    [[TMP52:%.*]] = load i32, ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[TMP53:%.*]] = add nsw i32 [[TMP51]], [[TMP52]]
; CHECK-NEXT:    [[TMP54:%.*]] = getelementptr inbounds i16, ptr [[TMP48]], i32 [[TMP53]]
; CHECK-NEXT:    store i16 [[TMP47]], ptr [[TMP54]], align 2, !tbaa [[TBAA15]]
; CHECK-NEXT:    br label %[[IF_END]]
; CHECK:       [[IF_END]]:
; CHECK-NEXT:    call void @llvm.lifetime.end.p0(i64 8, ptr [[ACC]]) #[[ATTR2]]
; CHECK-NEXT:    br label %[[FOR_INC31:.*]]
; CHECK:       [[FOR_INC31]]:
; CHECK-NEXT:    [[TMP33:%.*]] = load i32, ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[INC32:%.*]] = add nsw i32 [[TMP33]], 1
; CHECK-NEXT:    store i32 [[INC32]], ptr [[J]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    br label %[[FOR_COND1]], !llvm.loop [[LOOP19:![0-9]+]]
; CHECK:       [[FOR_END33]]:
; CHECK-NEXT:    br label %[[FOR_INC34:.*]]
; CHECK:       [[FOR_INC34]]:
; CHECK-NEXT:    [[TMP34:%.*]] = load i32, ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    [[INC35:%.*]] = add nsw i32 [[TMP34]], 1
; CHECK-NEXT:    store i32 [[INC35]], ptr [[I]], align 4, !tbaa [[TBAA11]]
; CHECK-NEXT:    br label %[[FOR_COND]], !llvm.loop [[LOOP20:![0-9]+]]
; CHECK:       [[FOR_END36]]:
; CHECK-NEXT:    store i32 1, ptr [[CLEANUP_DEST_SLOT]], align 4
; CHECK-NEXT:    call void @llvm.lifetime.end.p0(i64 4, ptr [[FINAL_SHIFT]]) #[[ATTR2]]
; CHECK-NEXT:    ret i32 0
;
entry:
  %A.addr = alloca ptr, align 4
  %B.addr = alloca ptr, align 4
  %C.addr = alloca ptr, align 4
  %m.addr = alloca i32, align 4
  %n.addr = alloca i32, align 4
  %k.addr = alloca i32, align 4
  %shift.addr = alloca i32, align 4
  %final_shift = alloca i32, align 4
  %i = alloca i32, align 4
  %cleanup.dest.slot = alloca i32, align 4
  %j = alloca i32, align 4
  %acc = alloca i64, align 8
  %s = alloca i32, align 4
  store ptr %A, ptr %A.addr, align 4, !tbaa !6
  store ptr %B, ptr %B.addr, align 4, !tbaa !6
  store ptr %C, ptr %C.addr, align 4, !tbaa !6
  store i32 %m, ptr %m.addr, align 4, !tbaa !11
  store i32 %n, ptr %n.addr, align 4, !tbaa !11
  store i32 %k, ptr %k.addr, align 4, !tbaa !11
  store i32 %shift, ptr %shift.addr, align 4, !tbaa !11
  call void @llvm.lifetime.start.p0(i64 4, ptr %final_shift) #2
  %0 = load i32, ptr %shift.addr, align 4, !tbaa !11
  %sub = sub nsw i32 %0, 15
  store i32 %sub, ptr %final_shift, align 4, !tbaa !11
  call void @llvm.lifetime.start.p0(i64 4, ptr %i) #2
  store i32 0, ptr %i, align 4, !tbaa !11
  br label %for.cond

for.cond:                                         ; preds = %for.inc34, %entry
  %1 = load i32, ptr %i, align 4, !tbaa !11
  %2 = load i32, ptr %m.addr, align 4, !tbaa !11
  %cmp = icmp slt i32 %1, %2
  br i1 %cmp, label %for.body, label %for.cond.cleanup

for.cond.cleanup:                                 ; preds = %for.cond
  store i32 2, ptr %cleanup.dest.slot, align 4
  call void @llvm.lifetime.end.p0(i64 4, ptr %i) #2
  br label %for.end36

for.body:                                         ; preds = %for.cond
  call void @llvm.lifetime.start.p0(i64 4, ptr %j) #2
  store i32 0, ptr %j, align 4, !tbaa !11
  br label %for.cond1

for.cond1:                                        ; preds = %for.inc31, %for.body
  %3 = load i32, ptr %j, align 4, !tbaa !11
  %4 = load i32, ptr %k.addr, align 4, !tbaa !11
  %cmp2 = icmp slt i32 %3, %4
  br i1 %cmp2, label %for.body4, label %for.cond.cleanup3

for.cond.cleanup3:                                ; preds = %for.cond1
  store i32 5, ptr %cleanup.dest.slot, align 4
  call void @llvm.lifetime.end.p0(i64 4, ptr %j) #2
  br label %for.end33

for.body4:                                        ; preds = %for.cond1
  call void @llvm.lifetime.start.p0(i64 8, ptr %acc) #2
  %5 = load i32, ptr %shift.addr, align 4, !tbaa !11
  %shr = ashr i32 32767, %5
  %conv = sext i32 %shr to i64
  store i64 %conv, ptr %acc, align 8, !tbaa !13
  call void @llvm.lifetime.start.p0(i64 4, ptr %s) #2
  store i32 0, ptr %s, align 4, !tbaa !11
  br label %for.cond5

for.cond5:                                        ; preds = %for.inc, %for.body4
  %6 = load i32, ptr %s, align 4, !tbaa !11
  %7 = load i32, ptr %n.addr, align 4, !tbaa !11
  %cmp6 = icmp slt i32 %6, %7
  br i1 %cmp6, label %for.body9, label %for.cond.cleanup8

for.cond.cleanup8:                                ; preds = %for.cond5
  store i32 8, ptr %cleanup.dest.slot, align 4
  call void @llvm.lifetime.end.p0(i64 4, ptr %s) #2
  br label %for.end

for.body9:                                        ; preds = %for.cond5
  %8 = load ptr, ptr %A.addr, align 4, !tbaa !6
  %9 = load i32, ptr %i, align 4, !tbaa !11
  %10 = load i32, ptr %n.addr, align 4, !tbaa !11
  %mul = mul nsw i32 %9, %10
  %11 = load i32, ptr %s, align 4, !tbaa !11
  %add = add nsw i32 %mul, %11
  %arrayidx = getelementptr inbounds i16, ptr %8, i32 %add
  %12 = load i16, ptr %arrayidx, align 2, !tbaa !15
  %conv10 = sext i16 %12 to i32
  %13 = load ptr, ptr %B.addr, align 4, !tbaa !6
  %14 = load i32, ptr %s, align 4, !tbaa !11
  %15 = load i32, ptr %k.addr, align 4, !tbaa !11
  %mul11 = mul nsw i32 %14, %15
  %16 = load i32, ptr %j, align 4, !tbaa !11
  %add12 = add nsw i32 %mul11, %16
  %arrayidx13 = getelementptr inbounds i16, ptr %13, i32 %add12
  %17 = load i16, ptr %arrayidx13, align 2, !tbaa !15
  %conv14 = sext i16 %17 to i32
  %mul15 = mul nsw i32 %conv10, %conv14
  %conv16 = sext i32 %mul15 to i64
  %18 = load i64, ptr %acc, align 8, !tbaa !13
  %add17 = add nsw i64 %18, %conv16
  store i64 %add17, ptr %acc, align 8, !tbaa !13
  br label %for.inc

for.inc:                                          ; preds = %for.body9
  %19 = load i32, ptr %s, align 4, !tbaa !11
  %inc = add nsw i32 %19, 1
  store i32 %inc, ptr %s, align 4, !tbaa !11
  br label %for.cond5, !llvm.loop !17

for.end:                                          ; preds = %for.cond.cleanup8
  %20 = load i32, ptr %final_shift, align 4, !tbaa !11
  %cmp18 = icmp sgt i32 %20, 0
  br i1 %cmp18, label %if.then, label %if.else

if.then:                                          ; preds = %for.end
  %21 = load i64, ptr %acc, align 8, !tbaa !13
  %22 = load i32, ptr %final_shift, align 4, !tbaa !11
  %sh_prom = zext i32 %22 to i64
  %shl = shl i64 %21, %sh_prom
  %conv20 = trunc i64 %shl to i16
  %23 = load ptr, ptr %C.addr, align 4, !tbaa !6
  %24 = load i32, ptr %i, align 4, !tbaa !11
  %25 = load i32, ptr %k.addr, align 4, !tbaa !11
  %mul21 = mul nsw i32 %24, %25
  %26 = load i32, ptr %j, align 4, !tbaa !11
  %add22 = add nsw i32 %mul21, %26
  %arrayidx23 = getelementptr inbounds i16, ptr %23, i32 %add22
  store i16 %conv20, ptr %arrayidx23, align 2, !tbaa !15
  br label %if.end

if.else:                                          ; preds = %for.end
  %27 = load i64, ptr %acc, align 8, !tbaa !13
  %28 = load i32, ptr %final_shift, align 4, !tbaa !11
  %sub24 = sub nsw i32 0, %28
  %sh_prom25 = zext i32 %sub24 to i64
  %shr26 = ashr i64 %27, %sh_prom25
  %conv27 = trunc i64 %shr26 to i16
  %29 = load ptr, ptr %C.addr, align 4, !tbaa !6
  %30 = load i32, ptr %i, align 4, !tbaa !11
  %31 = load i32, ptr %k.addr, align 4, !tbaa !11
  %mul28 = mul nsw i32 %30, %31
  %32 = load i32, ptr %j, align 4, !tbaa !11
  %add29 = add nsw i32 %mul28, %32
  %arrayidx30 = getelementptr inbounds i16, ptr %29, i32 %add29
  store i16 %conv27, ptr %arrayidx30, align 2, !tbaa !15
  br label %if.end

if.end:                                           ; preds = %if.else, %if.then
  call void @llvm.lifetime.end.p0(i64 8, ptr %acc) #2
  br label %for.inc31

for.inc31:                                        ; preds = %if.end
  %33 = load i32, ptr %j, align 4, !tbaa !11
  %inc32 = add nsw i32 %33, 1
  store i32 %inc32, ptr %j, align 4, !tbaa !11
  br label %for.cond1, !llvm.loop !19

for.end33:                                        ; preds = %for.cond.cleanup3
  br label %for.inc34

for.inc34:                                        ; preds = %for.end33
  %34 = load i32, ptr %i, align 4, !tbaa !11
  %inc35 = add nsw i32 %34, 1
  store i32 %inc35, ptr %i, align 4, !tbaa !11
  br label %for.cond, !llvm.loop !20

for.end36:                                        ; preds = %for.cond.cleanup
  store i32 1, ptr %cleanup.dest.slot, align 4
  call void @llvm.lifetime.end.p0(i64 4, ptr %final_shift) #2
  ret i32 0
}

; Function Attrs: nocallback nofree nosync nounwind willreturn memory(argmem: readwrite)
declare void @llvm.lifetime.start.p0(i64 immarg %0, ptr nocapture %1) #1

; Function Attrs: nocallback nofree nosync nounwind willreturn memory(argmem: readwrite)
declare void @llvm.lifetime.end.p0(i64 immarg %0, ptr nocapture %1) #1

attributes #0 = { nounwind "no-trapping-math"="true" "stack-protector-buffer-size"="8" "target-cpu"="generic-rv32" "target-features"="+32bit,+a,+c,+f,+m,+relax,+xesppie,+zaamo,+zalrsc,+zicsr,+zifencei,+zmmul,-b,-d,-e,-experimental-sdext,-experimental-sdtrig,-experimental-smctr,-experimental-ssctr,-experimental-svukte,-experimental-xqcia,-experimental-xqciac,-experimental-xqcicli,-experimental-xqcicm,-experimental-xqcics,-experimental-xqcicsr,-experimental-xqciint,-experimental-xqcilo,-experimental-xqcilsm,-experimental-xqcisls,-experimental-zalasr,-experimental-zicfilp,-experimental-zicfiss,-experimental-zvbc32e,-experimental-zvkgs,-h,-sha,-shcounterenw,-shgatpa,-shtvala,-shvsatpa,-shvstvala,-shvstvecd,-smaia,-smcdeleg,-smcsrind,-smdbltrp,-smepmp,-smmpm,-smnpm,-smrnmi,-smstateen,-ssaia,-ssccfg,-ssccptr,-sscofpmf,-sscounterenw,-sscsrind,-ssdbltrp,-ssnpm,-sspm,-ssqosid,-ssstateen,-ssstrict,-sstc,-sstvala,-sstvecd,-ssu64xl,-supm,-svade,-svadu,-svbare,-svinval,-svnapot,-svpbmt,-svvptc,-v,-xcvalu,-xcvbi,-xcvbitmanip,-xcvelw,-xcvmac,-xcvmem,-xcvsimd,-xmipscmove,-xmipslsp,-xsfcease,-xsfvcp,-xsfvfnrclipxfqf,-xsfvfwmaccqqq,-xsfvqmaccdod,-xsfvqmaccqoq,-xsifivecdiscarddlone,-xsifivecflushdlone,-xtheadba,-xtheadbb,-xtheadbs,-xtheadcmo,-xtheadcondmov,-xtheadfmemidx,-xtheadmac,-xtheadmemidx,-xtheadmempair,-xtheadsync,-xtheadvdot,-xventanacondops,-xwchc,-za128rs,-za64rs,-zabha,-zacas,-zama16b,-zawrs,-zba,-zbb,-zbc,-zbkb,-zbkc,-zbkx,-zbs,-zca,-zcb,-zcd,-zce,-zcf,-zcmop,-zcmp,-zcmt,-zdinx,-zfa,-zfbfmin,-zfh,-zfhmin,-zfinx,-zhinx,-zhinxmin,-zic64b,-zicbom,-zicbop,-zicboz,-ziccamoa,-ziccif,-zicclsm,-ziccrse,-zicntr,-zicond,-zihintntl,-zihintpause,-zihpm,-zimop,-zk,-zkn,-zknd,-zkne,-zknh,-zkr,-zks,-zksed,-zksh,-zkt,-ztso,-zvbb,-zvbc,-zve32f,-zve32x,-zve64d,-zve64f,-zve64x,-zvfbfmin,-zvfbfwma,-zvfh,-zvfhmin,-zvkb,-zvkg,-zvkn,-zvknc,-zvkned,-zvkng,-zvknha,-zvknhb,-zvks,-zvksc,-zvksed,-zvksg,-zvksh,-zvkt,-zvl1024b,-zvl128b,-zvl16384b,-zvl2048b,-zvl256b,-zvl32768b,-zvl32b,-zvl4096b,-zvl512b,-zvl64b,-zvl65536b,-zvl8192b" }
attributes #1 = { nocallback nofree nosync nounwind willreturn memory(argmem: readwrite) }
attributes #2 = { nounwind }

!llvm.module.flags = !{!0, !1, !2, !4}
!llvm.ident = !{!5}

!0 = !{i32 1, !"wchar_size", i32 4}
!1 = !{i32 1, !"target-abi", !"ilp32f"}
!2 = !{i32 6, !"riscv-isa", !3}
!3 = !{!"rv32i2p1_m2p0_a2p1_f2p2_c2p0_zicsr2p0_zifencei2p0_zmmul1p0_zaamo1p0_zalrsc1p0_xesppie1p0"}
!4 = !{i32 8, !"SmallDataLimit", i32 0}
!5 = !{!"Espressif clang version 17.0.1 (https://gitlab.espressif.cn:6688/idf/llvm-project.git llvmorg-19.1.2-277-gbe3198f esp-18.1.2_20240912-657-ge1dc1cc esp-18.1.2_20240912-657-ge1dc1cc esp-18.1.2_20240912-685-g8c39bf5 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 esp-18.1.2_20240912-694-g4a14fa0 esp-18.1.2_20240912-694-g4a14fa0 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-282-gf0df22b llvmorg-19.1.2-282-g61f783f llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-280-g353ae76 llvmorg-19.1.2-289-g6ab7981 llvmorg-19.1.2-294-ga687ee8 llvmorg-19.1.2-282-gded6180 llvmorg-19.1.2-295-gd6b9c67 llvmorg-19.1.2-296-g2bb38d3 llvmorg-19.1.2-302-gb46e43e llvmorg-19.1.2-282-g92c3b79 llvmorg-19.1.2-282-g92c3b79 llvmorg-19.1.2-282-g92c3b79 llvmorg-19.1.2-282-g92c3b79 llvmorg-19.1.2-282-g92c3b79 llvmorg-19.1.2-282-g92c3b79 llvmorg-19.1.2-282-ga193982 llvmorg-19.1.2-310-g012c995 llvmorg-19.1.2-373-g483ac18 llvmorg-19.1.2-373-g483ac18 llvmorg-19.1.2-373-g483ac18 esp-19.1.2_20250225-2-g2444a40 esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g77f93cb esp-19.1.2_20250225-2-g5a99af4 esp-19.1.2_20250225-2-g5a99af4 esp-19.1.2_20250225-4-g6ad288c esp-19.1.2_20250225-2-g78646ff esp-19.1.2_20250312 esp-19.1.2_20250312 esp-19.1.2_20250312-1-gbfbef3f esp-19.1.2_20250225-3-g153f4c7 esp-19.1.2_20250312-2-gf1328c0 esp-19.1.2_20250312-1-ga44194f esp-19.1.2_20250312-2-g6ad288c esp-19.1.2_20250225-5-gabba736 esp-19.1.2_20250312-6-gea26128 esp-19.1.2_20250312-6-gea26128 esp-19.1.2_20250312-6-gea26128 esp-19.1.2_20250312-6-gea26128 esp-19.1.2_20250312-1-ge8e26d4 esp-19.1.2_20250225-6-g1102ab9 esp-19.1.2_20250312-1-ga44194f esp-19.1.2_20250312-1-gfaf5f34 esp-19.1.2_20250312-2-g912da7e esp-19.1.2_20250312-12-g40fcb86 esp-19.1.2_20250312-22-g150517d esp-19.1.2_20250312-36-g3725281 esp-19.1.2_20250312-36-g3725281 esp-19.1.2_20250312-37-gd7ad151 esp-19.1.2_20250312-43-g1fdfc46 esp-19.1.2_20250225-9-gbdf8145 esp-19.1.2_20250225-9-gbdf8145 esp-19.1.2_20250225-9-gbdf8145 esp-19.1.2_20250312-67-g1b9c1af esp-19.1.2_20250312-67-g1b9c1af esp-19.1.2_20250312-2-g590a30f esp-19.1.2_20250312-2-g590a30f esp-19.1.2_20250312-68-g65bae88 esp-19.1.2_20250312-68-g65bae88 llvmorg-19.1.2-286-g58c0b0a esp-19.1.2_20250312-75-gc8e87f2 esp-19.1.2_20250312-75-gc8e87f2 esp-19.1.2_20250312-75-gc8e87f2 esp-19.1.2_20250312-2-gaccea5b esp-19.1.2_20250312-79-g85b8bac esp-19.1.2_20250312-1-g5bd87a5 esp-19.1.2_20250312-2-g398f0e9 esp-19.1.2_20250312-2-gfa1159a esp-19.1.2_20250312 esp-19.1.2_20250312-1-g190f2f0 esp-19.1.2_20250312 esp-19.1.2_20250312 esp-19.1.2_20250312 esp-19.1.2_20250312 esp-19.1.2_20250312-1-gdb3618a esp-19.1.2_20250312-5-g53503ec esp-19.1.2_20250312-14-gbd1030c esp-19.1.2_20250312-14-gbd1030c esp-19.1.2_20250312-94-ga50fb83 esp-19.1.2_20250312-21-g2d4e527 esp-19.1.2_20250312-22-gd828f8c esp-19.1.2_20250312-25-ga0db53c esp-19.1.2_20250312-30-g872c496e esp-19.1.2_20250312-30-g872c496e esp-19.1.2_20250312-30-g872c496e esp-19.1.2_20250312-50-g36efec3 esp-19.1.2_20250312-49-g66c7bd3 esp-19.1.2_20250312-68-gef601b8 esp-19.1.2_20250312-84-g3338f1a esp-19.1.2_20250225-105-gfa4c43d esp-19.1.2_20250312-99-gcad4d17 esp-19.1.2_20250312-2-g7c53768 esp-19.1.2_20250312-2-g7c53768 esp-19.1.2_20250312-3-g77450217 esp-19.1.2_20250312-1-g0b10ac7 esp-19.1.2_20250312-1-g0b10ac7 esp-19.1.2_20250312-7-ge58b5b9 esp-19.1.2_20250312-7-ge58b5b9 esp-19.1.2_20250312-9-gf8d929c esp-19.1.2_20250312-9-gf8d929c esp-19.1.2_20250312-1-g0b10ac7 esp-19.1.2_20250312-14-gcc23a57 esp-19.1.2_20250312-15-gb030eec esp-19.1.2_20250312-16-g5e690f7 esp-19.1.2_20250312-18-g64518b8 esp-19.1.2_20250312-19-gf837620 esp-19.1.2_20250312-30-gce11723 esp-19.1.2_20250312-36-gc4a4385 esp-19.1.2_20250312-45-gb1f78a1 esp-19.1.2_20250312-45-gb1f78a1 llvmorg-20.1.1-294-g54395c3 esp-19.1.2_20250312-54-gdd06c183 llvmorg-20.1.1-295-g4acb682 esp-19.1.2_20250312-55-g38d03d5 esp-19.1.2_20250312-57-g94f4e0b esp-19.1.2_20250312-58-gefb38fa esp-19.1.2_20250312-58-gefb38fa esp-19.1.2_20250312-59-g65810cd esp-19.1.2_20250312-68-g8571eac esp-19.1.2_20250312-3-g77450217 esp-19.1.2_20250312-77-g1941a49 esp-19.1.2_20250225-2-g5384b3c esp-19.1.2_20250312-80-g25b2378 llvmorg-20.1.1-292-gd2afeba llvmorg-20.1.1-292-g50b226d llvmorg-20.1.1-292-g50b226d esp-19.1.2_20250312-3-geb75cb5 llvmorg-20.1.1-290-gcc1c2fc llvmorg-20.1.1-290-gcc1c2fc llvmorg-20.1.1-290-gcc1c2fc llvmorg-20.1.1-292-g50b226d llvmorg-20.1.1-290-gcc1c2fc llvmorg-20.1.1-290-g64a73de llvmorg-20.1.1-290-gae1fe28 llvmorg-20.1.1-290-gae1fe28 esp-19.1.2_20250312-3-geb75cb5 llvmorg-20.1.1-290-g78197bd llvmorg-20.1.1-290-g8cf4429 llvmorg-20.1.1-290-g404545a esp-19.1.2_20250312-80-g25b2378 llvmorg-20.1.1-292-ga09200d llvmorg-20.1.1-290-g56858ea llvmorg-20.1.1-290-g56858ea llvmorg-20.1.1-290-g56858ea llvmorg-20.1.1-294-g417d26e llvmorg-20.1.1-290-gfaa84cc llvmorg-20.1.1-290-g9f9302d llvmorg-20.1.1-294-g9f00800 esp-19.1.2_20250312-81-g6c8bfdc esp-19.1.2_20250312-81-g6c8bfdc esp-19.1.2_20250312-81-g6c8bfdc esp-19.1.2_20250312-81-g6c8bfdc esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 esp-19.1.2_20250312-82-g98420c0 llvmorg-20.1.1-294-g9f00800 llvmorg-20.1.1-294-g9f00800 esp-19.1.2_20250312-83-gfb339b7 llvmorg-20.1.1-297-ge0e1152 esp-19.1.2_20250312-83-gfb339b7 esp-19.1.2_20250312-90-ga331fb4 esp-19.1.2_20250312-62-gd04b8d6 esp-19.1.2_20250312-106-g747850b esp-19.1.2_20250312-62-gd04b8d6 esp-19.1.2_20250312-106-g747850b esp-19.1.2_20250312-62-gd04b8d6 esp-19.1.2_20250312-106-g747850b esp-19.1.2_20250312-106-g747850b esp-19.1.2_20250312-106-g747850b esp-19.1.2_20250312-115-g596469c llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-300-g8a2d605 llvmorg-20.1.1-298-g5df1c75 esp-20.1.1_20250812-39-g8fd161b esp-19.1.2_20250225-2-g761bb45 esp-20.1.1_20250812-2-g8a2d605 esp-20.1.1_20250812-5-g9908fc01 esp-20.1.1_20250812-47-g5173103 esp-20.1.1_20250812-66-g5a643bf esp-20.1.1_20250812-86-g3edfaae llvmorg-19.1.2-281-gc84ed4e esp-19.1.2_20250312-127-g3407862 esp-19.1.2_20250225-2-g5384b3c esp-20.1.1_20250829-142-gfcec0eb esp-20.1.1_20250829-142-gfcec0eb esp-20.1.1_20250829-143-g1b5ddf3 esp-20.1.1_20250812-112-gba39f00 esp-20.1.1_20250829-143-g1b5ddf3)"}
!6 = !{!7, !7, i64 0}
!7 = !{!"p1 short", !8, i64 0}
!8 = !{!"any pointer", !9, i64 0}
!9 = !{!"omnipotent char", !10, i64 0}
!10 = !{!"Simple C/C++ TBAA"}
!11 = !{!12, !12, i64 0}
!12 = !{!"int", !9, i64 0}
!13 = !{!14, !14, i64 0}
!14 = !{!"long long", !9, i64 0}
!15 = !{!16, !16, i64 0}
!16 = !{!"short", !9, i64 0}
!17 = distinct !{!17, !18}
!18 = !{!"llvm.loop.mustprogress"}
!19 = distinct !{!19, !18}
!20 = distinct !{!20, !18}
;.
; CHECK: [[TBAA6]] = !{[[META7:![0-9]+]], [[META7]], i64 0}
; CHECK: [[META7]] = !{!"p1 short", [[META8:![0-9]+]], i64 0}
; CHECK: [[META8]] = !{!"any pointer", [[META9:![0-9]+]], i64 0}
; CHECK: [[META9]] = !{!"omnipotent char", [[META10:![0-9]+]], i64 0}
; CHECK: [[META10]] = !{!"Simple C/C++ TBAA"}
; CHECK: [[TBAA11]] = !{[[META12:![0-9]+]], [[META12]], i64 0}
; CHECK: [[META12]] = !{!"int", [[META9]], i64 0}
; CHECK: [[TBAA13]] = !{[[META14:![0-9]+]], [[META14]], i64 0}
; CHECK: [[META14]] = !{!"long long", [[META9]], i64 0}
; CHECK: [[TBAA15]] = !{[[META16:![0-9]+]], [[META16]], i64 0}
; CHECK: [[META16]] = !{!"short", [[META9]], i64 0}
; CHECK: [[LOOP17]] = distinct !{[[LOOP17]], [[META18:![0-9]+]]}
; CHECK: [[META18]] = !{!"llvm.loop.mustprogress"}
; CHECK: [[LOOP19]] = distinct !{[[LOOP19]], [[META18]]}
; CHECK: [[LOOP20]] = distinct !{[[LOOP20]], [[META18]]}
;.
