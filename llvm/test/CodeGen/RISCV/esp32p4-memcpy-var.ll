; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -mtriple=riscv32-esp-unknown-elf -passes=riscv-esp32-p4-mem-intrin -riscv-esp32-p4-mem-intrin=true < %s | FileCheck %s
target datalayout = "e-m:e-p:32:32-i64:64-n32-S128"
target triple = "riscv32-esp-unknown-elf"

define void @test_src16_dst16_variable_size(ptr %a, ptr %b, i32 %size) {
; CHECK-LABEL: define void @test_src16_dst16_variable_size(
; CHECK-SAME: ptr [[A:%.*]], ptr [[B:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[TMP0:%.*]] = ptrtoint ptr [[B]] to i32
; CHECK-NEXT:    [[TMP1:%.*]] = ptrtoint ptr [[A]] to i32
; CHECK-NEXT:    call void @esp32p4MemCpySrc16Dst16Var(i32 [[TMP1]], i32 [[TMP0]], i32 [[SIZE]])
; CHECK-NEXT:    ret void
;
entry:
  tail call void @llvm.memcpy.p0.p0.i32(ptr noundef nonnull align 16 %a, ptr noundef nonnull align 16 %b, i32 %size, i1 false)
  ret void
}

define void @test_src16_dst8_variable_size(ptr %a, ptr %b, i32 %size) {
; CHECK-LABEL: define void @test_src16_dst8_variable_size(
; CHECK-SAME: ptr [[A:%.*]], ptr [[B:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[TMP1:%.*]] = ptrtoint ptr [[B]] to i32
; CHECK-NEXT:    [[TMP2:%.*]] = ptrtoint ptr [[A]] to i32
; CHECK-NEXT:    call void @esp32p4MemCpySrc16Dst8Var(i32 [[TMP2]], i32 [[TMP1]], i32 [[SIZE]])
; CHECK-NEXT:    ret void
;
entry:
  tail call void @llvm.memcpy.p0.p0.i32(ptr noundef nonnull align 8 %a, ptr noundef nonnull align 16 %b, i32 %size, i1 false)
  ret void
}

define void @test_src8_dst16_variable_size(ptr %a, ptr %b, i32 %size) {
; CHECK-LABEL: define void @test_src8_dst16_variable_size(
; CHECK-SAME: ptr [[A:%.*]], ptr [[B:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[TMP1:%.*]] = ptrtoint ptr [[B]] to i32
; CHECK-NEXT:    [[TMP2:%.*]] = ptrtoint ptr [[A]] to i32
; CHECK-NEXT:    call void @esp32p4MemCpySrc8Dst16Var(i32 [[TMP2]], i32 [[TMP1]], i32 [[SIZE]])
; CHECK-NEXT:    ret void
;
entry:
  tail call void @llvm.memcpy.p0.p0.i32(ptr noundef nonnull align 16 %a, ptr noundef nonnull align 8 %b, i32 %size, i1 false)
  ret void
}

define void @test_src8_dst8_variable_size(ptr %a, ptr %b, i32 %size) {
; CHECK-LABEL: define void @test_src8_dst8_variable_size(
; CHECK-SAME: ptr [[A:%.*]], ptr [[B:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[TMP1:%.*]] = ptrtoint ptr [[B]] to i32
; CHECK-NEXT:    [[TMP2:%.*]] = ptrtoint ptr [[A]] to i32
; CHECK-NEXT:    call void @esp32p4MemCpySrc8Dst8Var(i32 [[TMP2]], i32 [[TMP1]], i32 [[SIZE]])
; CHECK-NEXT:    ret void
;
entry:
  tail call void @llvm.memcpy.p0.p0.i32(ptr noundef nonnull align 8 %a, ptr noundef nonnull align 8 %b, i32 %size, i1 false)
  ret void
}

declare void @llvm.memcpy.p0.p0.i32(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i32, i1 immarg)


; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc16Dst16Var(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc16Dst16Var(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[CMP:%.*]] = icmp ult i32 [[TMP2]], 8
; CHECK-NEXT:    br i1 [[CMP]], label %[[HANDLE_SMALL_SIZE:.*]], label %[[CHECK_MID_RANGE:.*]]
; CHECK:       [[HANDLE_SMALL_SIZE]]:
; CHECK-NEXT:    [[TMP3:%.*]] = inttoptr i32 [[TMP0]] to ptr
; CHECK-NEXT:    [[TMP4:%.*]] = inttoptr i32 [[TMP1]] to ptr
; CHECK-NEXT:    tail call void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr [[TMP3]], ptr [[TMP4]], i32 [[TMP2]])
; CHECK-NEXT:    br label %[[RETURN:.*]]
; CHECK:       [[CHECK_MID_RANGE]]:
; CHECK-NEXT:    [[CMP1:%.*]] = icmp ult i32 [[TMP2]], 16
; CHECK-NEXT:    br i1 [[CMP1]], label %[[HANDLE_MID_SIZE:.*]], label %[[HANDLE_LARGE_LOOP:.*]]
; CHECK:       [[HANDLE_MID_SIZE]]:
; CHECK-NEXT:    [[VLDL64IP:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[TMP1]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[TMP0]], i32 8)
; CHECK-NEXT:    [[TMP5:%.*]] = inttoptr i32 [[VSTL64IP]] to ptr
; CHECK-NEXT:    [[TMP6:%.*]] = inttoptr i32 [[VLDL64IP]] to ptr
; CHECK-NEXT:    [[SUB:%.*]] = add nsw i32 [[TMP2]], -8
; CHECK-NEXT:    call void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr [[TMP5]], ptr [[TMP6]], i32 [[SUB]])
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[HANDLE_LARGE_LOOP]]:
; CHECK-NEXT:    [[DIV94:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[REM:%.*]] = lshr i32 [[TMP2]], 4
; CHECK-NEXT:    [[DIV195:%.*]] = and i32 [[REM]], 7
; CHECK-NEXT:    [[REM4:%.*]] = and i32 [[TMP2]], 7
; CHECK-NEXT:    [[CMP97_NOT:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[CMP97_NOT]], label %[[LOOP_EXIT_CLEANUP:.*]], label %[[LOOP_BODY_128B:.*]]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[LOOP_EXIT_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLD128IP7:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VST128IP14:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    switch i32 [[DIV195]], label %[[INVALID_SWITCH_TRAP:.*]] [
; CHECK-NEXT:      i32 1, label %[[TAIL_CASE_1:.*]]
; CHECK-NEXT:      i32 2, label %[[TAIL_CASE_2:.*]]
; CHECK-NEXT:      i32 3, label %[[TAIL_CASE_3:.*]]
; CHECK-NEXT:      i32 4, label %[[TAIL_CASE_4:.*]]
; CHECK-NEXT:      i32 5, label %[[TAIL_CASE_5:.*]]
; CHECK-NEXT:      i32 6, label %[[TAIL_CASE_6:.*]]
; CHECK-NEXT:      i32 7, label %[[TAIL_CASE_7:.*]]
; CHECK-NEXT:      i32 0, label %[[HANDLE_TAIL_SWITCH:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[LOOP_BODY_128B]]:
; CHECK-NEXT:    [[I_098:%.*]] = phi i32 [ 0, %[[HANDLE_LARGE_LOOP]] ], [ [[INC:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[SRC_PTR_PHI:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLD128IP7]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_PHI:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VST128IP14]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[VLD128IP:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_PHI]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP1:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP2:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP1]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP3:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP2]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP4:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP3]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP5:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP4]], i32 16, i32 5)
; CHECK-NEXT:    [[VLD128IP6:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP5]], i32 16, i32 6)
; CHECK-NEXT:    [[VLD128IP7]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP6]], i32 16, i32 7)
; CHECK-NEXT:    [[VST128IP:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_PHI]], i32 16)
; CHECK-NEXT:    [[VST128IP8:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP]], i32 16)
; CHECK-NEXT:    [[VST128IP9:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP8]], i32 16)
; CHECK-NEXT:    [[VST128IP10:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP9]], i32 16)
; CHECK-NEXT:    [[VST128IP11:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP10]], i32 16)
; CHECK-NEXT:    [[VST128IP12:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP11]], i32 16)
; CHECK-NEXT:    [[VST128IP13:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 [[VST128IP12]], i32 16)
; CHECK-NEXT:    [[VST128IP14]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 [[VST128IP13]], i32 16)
; CHECK-NEXT:    [[INC]] = add nuw nsw i32 [[I_098]], 1
; CHECK-NEXT:    [[EXITCOND_NOT:%.*]] = icmp eq i32 [[INC]], [[DIV94]]
; CHECK-NEXT:    br i1 [[EXITCOND_NOT]], label %[[LOOP_EXIT_CLEANUP]], label %[[LOOP_BODY_128B]]
; CHECK:       [[HANDLE_TAIL_SWITCH]]:
; CHECK-NEXT:    [[SRC_PTR_EPILOG:%.*]] = phi i32 [ [[SRC_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VLD128IP15:%.*]], %[[TAIL_CASE_1]] ], [ [[VLD128IP18:%.*]], %[[TAIL_CASE_2]] ], [ [[VLD128IP23:%.*]], %[[TAIL_CASE_3]] ], [ [[VLD128IP30:%.*]], %[[TAIL_CASE_4]] ], [ [[VLD128IP39:%.*]], %[[TAIL_CASE_5]] ], [ [[VLD128IP50:%.*]], %[[TAIL_CASE_6]] ], [ [[VLD128IP63:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[DST_PTR_EPILOG:%.*]] = phi i32 [ [[DST_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VST128IP16:%.*]], %[[TAIL_CASE_1]] ], [ [[VST128IP20:%.*]], %[[TAIL_CASE_2]] ], [ [[VST128IP26:%.*]], %[[TAIL_CASE_3]] ], [ [[VST128IP34:%.*]], %[[TAIL_CASE_4]] ], [ [[VST128IP44:%.*]], %[[TAIL_CASE_5]] ], [ [[VST128IP56:%.*]], %[[TAIL_CASE_6]] ], [ [[VST128IP70:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[TMP7:%.*]] = and i32 [[TMP2]], 8
; CHECK-NEXT:    [[TMP8:%.*]] = icmp eq i32 [[TMP7]], 0
; CHECK-NEXT:    br i1 [[TMP8]], label %[[AFTER_8B_TAIL:.*]], label %[[HANDLE_8B_TAIL:.*]]
; CHECK:       [[INVALID_SWITCH_TRAP]]:
; CHECK-NEXT:    unreachable
; CHECK:       [[HANDLE_8B_TAIL]]:
; CHECK-NEXT:    [[VLDL64IP71:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_EPILOG]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP72:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_EPILOG]], i32 8)
; CHECK-NEXT:    br label %[[AFTER_8B_TAIL]]
; CHECK:       [[AFTER_8B_TAIL]]:
; CHECK-NEXT:    [[SRC_PTR_END17:%.*]] = phi i32 [ [[SRC_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VLDL64IP71]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[DST_PTR_END17:%.*]] = phi i32 [ [[DST_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VSTL64IP72]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[TMP9:%.*]] = icmp eq i32 [[REM4]], 0
; CHECK-NEXT:    br i1 [[TMP9]], label %[[RETURN]], label %[[HANDLE_REMAINING_BYTES:.*]]
; CHECK:       [[TAIL_CASE_1]]:
; CHECK-NEXT:    [[VLD128IP15]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VST128IP16]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_2]]:
; CHECK-NEXT:    [[VLD128IP17:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP18]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP17]], i32 16, i32 1)
; CHECK-NEXT:    [[VST128IP19:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP20]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP19]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_3]]:
; CHECK-NEXT:    [[VLD128IP21:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP22:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP21]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP23]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP22]], i32 16, i32 2)
; CHECK-NEXT:    [[VST128IP24:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP25:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP24]], i32 16)
; CHECK-NEXT:    [[VST128IP26]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP25]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_4]]:
; CHECK-NEXT:    [[VLD128IP27:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP28:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP27]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP29:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP28]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP30]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP29]], i32 16, i32 3)
; CHECK-NEXT:    [[VST128IP31:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP32:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP31]], i32 16)
; CHECK-NEXT:    [[VST128IP33:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP32]], i32 16)
; CHECK-NEXT:    [[VST128IP34]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP33]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_5]]:
; CHECK-NEXT:    [[VLD128IP35:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP36:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP35]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP37:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP36]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP38:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP37]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP39]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP38]], i32 16, i32 4)
; CHECK-NEXT:    [[VST128IP40:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP41:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP40]], i32 16)
; CHECK-NEXT:    [[VST128IP42:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP41]], i32 16)
; CHECK-NEXT:    [[VST128IP43:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP42]], i32 16)
; CHECK-NEXT:    [[VST128IP44]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP43]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_6]]:
; CHECK-NEXT:    [[VLD128IP45:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP46:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP45]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP47:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP46]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP48:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP47]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP49:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP48]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP50]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP49]], i32 16, i32 5)
; CHECK-NEXT:    [[VST128IP51:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP52:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP51]], i32 16)
; CHECK-NEXT:    [[VST128IP53:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP52]], i32 16)
; CHECK-NEXT:    [[VST128IP54:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP53]], i32 16)
; CHECK-NEXT:    [[VST128IP55:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP54]], i32 16)
; CHECK-NEXT:    [[VST128IP56]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP55]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_7]]:
; CHECK-NEXT:    [[VLD128IP57:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP58:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP57]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP59:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP58]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP60:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP59]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP61:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP60]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP62:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP61]], i32 16, i32 5)
; CHECK-NEXT:    [[VLD128IP63]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP62]], i32 16, i32 6)
; CHECK-NEXT:    [[VST128IP64:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP65:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP64]], i32 16)
; CHECK-NEXT:    [[VST128IP66:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP65]], i32 16)
; CHECK-NEXT:    [[VST128IP67:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP66]], i32 16)
; CHECK-NEXT:    [[VST128IP68:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP67]], i32 16)
; CHECK-NEXT:    [[VST128IP69:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP68]], i32 16)
; CHECK-NEXT:    [[VST128IP70]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 [[VST128IP69]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[HANDLE_REMAINING_BYTES]]:
; CHECK-NEXT:    [[TMP10:%.*]] = inttoptr i32 [[SRC_PTR_END17]] to ptr
; CHECK-NEXT:    [[TMP11:%.*]] = inttoptr i32 [[DST_PTR_END17]] to ptr
; CHECK-NEXT:    call void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr [[TMP11]], ptr [[TMP10]], i32 [[REM4]])
; CHECK-NEXT:    br label %[[RETURN]]
;
ntry:
  %is.lt.8 = icmp ult i32 %2, 8
  br i1 %is.lt.8, label %handle.small.size, label %check.mid.range

handle.small.size:                                ; preds = %entry
  %3 = inttoptr i32 %0 to ptr
  %4 = inttoptr i32 %1 to ptr
  tail call void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr %3, ptr %4, i32 %2)
  br label %return

check.mid.range:                                  ; preds = %entry
  %is.lt.16 = icmp ult i32 %2, 16
  br i1 %is.lt.16, label %handle.mid.size, label %handle.large.loop

handle.mid.size:                                  ; preds = %check.mid.range
  %vldl64ip = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %1, i32 8, i32 0)
  %vstl64ip = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %0, i32 8)
  %5 = inttoptr i32 %vstl64ip to ptr
  %6 = inttoptr i32 %vldl64ip to ptr
  %size.minus.8 = add nsw i32 %2, -8
  call void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr %5, ptr %6, i32 %size.minus.8)
  br label %return

handle.large.loop:                                ; preds = %check.mid.range
  %num.128B.blocks = lshr i32 %2, 7
  %num.16B.blocks = lshr i32 %2, 4
  %remaining.16B.blocks = and i32 %num.16B.blocks, 7
  %remaining.bytes = and i32 %2, 7
  %is.lt.128 = icmp ult i32 %2, 128
  br i1 %is.lt.128, label %loop.exit.cleanup, label %loop.body.128B

return:                                           ; preds = %handle.remaining.bytes, %after.8B.tail, %handle.mid.size, %handle.small.size
  ret void

loop.exit.cleanup:                                ; preds = %loop.body.128B, %handle.large.loop
  %src.ptr.after.loop = phi i32 [ %1, %handle.large.loop ], [ %vld128ip7, %loop.body.128B ]
  %dst.ptr.after.loop = phi i32 [ %0, %handle.large.loop ], [ %vst128ip14, %loop.body.128B ]
  switch i32 %remaining.16B.blocks, label %invalid.switch.trap [
  i32 1, label %tail.case.1
  i32 2, label %tail.case.2
  i32 3, label %tail.case.3
  i32 4, label %tail.case.4
  i32 5, label %tail.case.5
  i32 6, label %tail.case.6
  i32 7, label %tail.case.7
  i32 0, label %handle.tail.switch
  ]

loop.body.128B:                                   ; preds = %loop.body.128B, %handle.large.loop
  %loop.index = phi i32 [ 0, %handle.large.loop ], [ %loop.inc, %loop.body.128B ]
  %src.ptr.loop = phi i32 [ %1, %handle.large.loop ], [ %vld128ip7, %loop.body.128B ]
  %dst.ptr.loop = phi i32 [ %0, %handle.large.loop ], [ %vst128ip14, %loop.body.128B ]
  %vld128ip = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.loop, i32 16, i32 0)
  %vld128ip1 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip, i32 16, i32 1)
  %vld128ip2 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip1, i32 16, i32 2)
  %vld128ip3 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip2, i32 16, i32 3)
  %vld128ip4 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip3, i32 16, i32 4)
  %vld128ip5 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip4, i32 16, i32 5)
  %vld128ip6 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip5, i32 16, i32 6)
  %vld128ip7 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip6, i32 16, i32 7)
  %vst128ip = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.loop, i32 16)
  %vst128ip8 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip, i32 16)
  %vst128ip9 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip8, i32 16)
  %vst128ip10 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip9, i32 16)
  %vst128ip11 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip10, i32 16)
  %vst128ip12 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip11, i32 16)
  %vst128ip13 = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 %vst128ip12, i32 16)
  %vst128ip14 = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 %vst128ip13, i32 16)
  %loop.inc = add nuw nsw i32 %loop.index, 1
  %loop.done = icmp eq i32 %loop.inc, %num.128B.blocks
  br i1 %loop.done, label %loop.exit.cleanup, label %loop.body.128B

handle.tail.switch:                               ; preds = %loop.exit.cleanup, %tail.case.7, %tail.case.6, %tail.case.5, %tail.case.4, %tail.case.3, %tail.case.2, %tail.case.1
  %src.ptr.tail = phi i32 [ %src.ptr.after.loop, %loop.exit.cleanup ], [ %vld128ip15, %tail.case.1 ], [ %vld128ip18, %tail.case.2 ], [ %vld128ip23, %tail.case.3 ], [ %vld128ip30, %tail.case.4 ], [ %vld128ip39, %tail.case.5 ], [ %vld128ip50, %tail.case.6 ], [ %vld128ip63, %tail.case.7 ]
  %dst.ptr.tail = phi i32 [ %dst.ptr.after.loop, %loop.exit.cleanup ], [ %vst128ip16, %tail.case.1 ], [ %vst128ip20, %tail.case.2 ], [ %vst128ip26, %tail.case.3 ], [ %vst128ip34, %tail.case.4 ], [ %vst128ip44, %tail.case.5 ], [ %vst128ip56, %tail.case.6 ], [ %vst128ip70, %tail.case.7 ]
  %7 = and i32 %2, 8
  %8 = icmp eq i32 %7, 0
  br i1 %8, label %after.8B.tail, label %handle.8B.tail

invalid.switch.trap:                              ; preds = %loop.exit.cleanup
  unreachable

handle.8B.tail:                                   ; preds = %handle.tail.switch
  %vldl64ip71 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.tail, i32 8, i32 0)
  %vstl64ip72 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.tail, i32 8)
  br label %after.8B.tail

after.8B.tail:                                    ; preds = %handle.8B.tail, %handle.tail.switch
  %src.ptr.after.8B = phi i32 [ %src.ptr.tail, %handle.tail.switch ], [ %vldl64ip71, %handle.8B.tail ]
  %dst.ptr.after.8B = phi i32 [ %dst.ptr.tail, %handle.tail.switch ], [ %vstl64ip72, %handle.8B.tail ]
  %9 = icmp eq i32 %remaining.bytes, 0
  br i1 %9, label %return, label %handle.remaining.bytes

tail.case.1:                                      ; preds = %loop.exit.cleanup
  %vld128ip15 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vst128ip16 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  br label %handle.tail.switch

tail.case.2:                                      ; preds = %loop.exit.cleanup
  %vld128ip17 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip18 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip17, i32 16, i32 1)
  %vst128ip19 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip20 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip19, i32 16)
  br label %handle.tail.switch

tail.case.3:                                      ; preds = %loop.exit.cleanup
  %vld128ip21 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip22 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip21, i32 16, i32 1)
  %vld128ip23 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip22, i32 16, i32 2)
  %vst128ip24 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip25 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip24, i32 16)
  %vst128ip26 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip25, i32 16)
  br label %handle.tail.switch

tail.case.4:                                      ; preds = %loop.exit.cleanup
  %vld128ip27 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip28 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip27, i32 16, i32 1)
  %vld128ip29 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip28, i32 16, i32 2)
  %vld128ip30 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip29, i32 16, i32 3)
  %vst128ip31 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip32 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip31, i32 16)
  %vst128ip33 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip32, i32 16)
  %vst128ip34 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip33, i32 16)
  br label %handle.tail.switch

tail.case.5:                                      ; preds = %loop.exit.cleanup
  %vld128ip35 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip36 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip35, i32 16, i32 1)
  %vld128ip37 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip36, i32 16, i32 2)
  %vld128ip38 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip37, i32 16, i32 3)
  %vld128ip39 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip38, i32 16, i32 4)
  %vst128ip40 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip41 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip40, i32 16)
  %vst128ip42 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip41, i32 16)
  %vst128ip43 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip42, i32 16)
  %vst128ip44 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip43, i32 16)
  br label %handle.tail.switch

tail.case.6:                                      ; preds = %loop.exit.cleanup
  %vld128ip45 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip46 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip45, i32 16, i32 1)
  %vld128ip47 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip46, i32 16, i32 2)
  %vld128ip48 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip47, i32 16, i32 3)
  %vld128ip49 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip48, i32 16, i32 4)
  %vld128ip50 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip49, i32 16, i32 5)
  %vst128ip51 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip52 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip51, i32 16)
  %vst128ip53 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip52, i32 16)
  %vst128ip54 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip53, i32 16)
  %vst128ip55 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip54, i32 16)
  %vst128ip56 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip55, i32 16)
  br label %handle.tail.switch

tail.case.7:                                      ; preds = %loop.exit.cleanup
  %vld128ip57 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip58 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip57, i32 16, i32 1)
  %vld128ip59 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip58, i32 16, i32 2)
  %vld128ip60 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip59, i32 16, i32 3)
  %vld128ip61 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip60, i32 16, i32 4)
  %vld128ip62 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip61, i32 16, i32 5)
  %vld128ip63 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip62, i32 16, i32 6)
  %vst128ip64 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip65 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip64, i32 16)
  %vst128ip66 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip65, i32 16)
  %vst128ip67 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip66, i32 16)
  %vst128ip68 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip67, i32 16)
  %vst128ip69 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip68, i32 16)
  %vst128ip70 = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 %vst128ip69, i32 16)
  br label %handle.tail.switch

handle.remaining.bytes:                           ; preds = %after.8B.tail
  %10 = inttoptr i32 %src.ptr.after.8B to ptr
  %11 = inttoptr i32 %dst.ptr.after.8B to ptr
  call void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr %11, ptr %10, i32 %remaining.bytes)
  br label %return
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc16Dst16From1To7Opt(ptr %dst, ptr %src, i32 %size)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc16Dst16From1To7Opt(
; CHECK-SAME: ptr [[DST:%.*]], ptr [[SRC:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    switch i32 [[SIZE]], label %[[RETURN:.*]] [
; CHECK-NEXT:      i32 1, label %[[SW_BB1:.*]]
; CHECK-NEXT:      i32 2, label %[[SW_BB2:.*]]
; CHECK-NEXT:      i32 3, label %[[SW_BB3:.*]]
; CHECK-NEXT:      i32 4, label %[[SW_BB4:.*]]
; CHECK-NEXT:      i32 5, label %[[SW_BB5:.*]]
; CHECK-NEXT:      i32 6, label %[[SW_BB6:.*]]
; CHECK-NEXT:      i32 7, label %[[SW_BB7:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[SW_BB1]]:
; CHECK-NEXT:    [[SRC_GEP_I8:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I8:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP0:%.*]] = load i8, ptr [[SRC_GEP_I8]], align 1
; CHECK-NEXT:    store i8 [[TMP0]], ptr [[DST_GEP_I8]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB2]]:
; CHECK-NEXT:    [[SRC_GEP_I16:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I16:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP1:%.*]] = load i16, ptr [[SRC_GEP_I16]], align 2
; CHECK-NEXT:    store i16 [[TMP1]], ptr [[DST_GEP_I16]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB3]]:
; CHECK-NEXT:    [[SRC_GEP_I161:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I162:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP2:%.*]] = load i16, ptr [[SRC_GEP_I161]], align 2
; CHECK-NEXT:    store i16 [[TMP2]], ptr [[DST_GEP_I162]], align 2
; CHECK-NEXT:    [[SRC_GEP_I83:%.*]] = getelementptr i8, ptr [[SRC]], i32 2
; CHECK-NEXT:    [[DST_GEP_I84:%.*]] = getelementptr i8, ptr [[DST]], i32 2
; CHECK-NEXT:    [[TMP3:%.*]] = load i8, ptr [[SRC_GEP_I83]], align 1
; CHECK-NEXT:    store i8 [[TMP3]], ptr [[DST_GEP_I84]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB4]]:
; CHECK-NEXT:    [[SRC_GEP_I32:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I32:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr [[SRC_GEP_I32]], align 4
; CHECK-NEXT:    store i32 [[TMP4]], ptr [[DST_GEP_I32]], align 4
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB5]]:
; CHECK-NEXT:    [[SRC_GEP_I325:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I326:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr [[SRC_GEP_I325]], align 4
; CHECK-NEXT:    store i32 [[TMP5]], ptr [[DST_GEP_I326]], align 4
; CHECK-NEXT:    [[SRC_GEP_I87:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I88:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP6:%.*]] = load i8, ptr [[SRC_GEP_I87]], align 1
; CHECK-NEXT:    store i8 [[TMP6]], ptr [[DST_GEP_I88]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB6]]:
; CHECK-NEXT:    [[SRC_GEP_I329:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3210:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP7:%.*]] = load i32, ptr [[SRC_GEP_I329]], align 4
; CHECK-NEXT:    store i32 [[TMP7]], ptr [[DST_GEP_I3210]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1611:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1612:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP8:%.*]] = load i16, ptr [[SRC_GEP_I1611]], align 2
; CHECK-NEXT:    store i16 [[TMP8]], ptr [[DST_GEP_I1612]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB7]]:
; CHECK-NEXT:    [[SRC_GEP_I3213:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3214:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP9:%.*]] = load i32, ptr [[SRC_GEP_I3213]], align 4
; CHECK-NEXT:    store i32 [[TMP9]], ptr [[DST_GEP_I3214]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1615:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1616:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP10:%.*]] = load i16, ptr [[SRC_GEP_I1615]], align 2
; CHECK-NEXT:    store i16 [[TMP10]], ptr [[DST_GEP_I1616]], align 2
; CHECK-NEXT:    [[SRC_GEP_I817:%.*]] = getelementptr i8, ptr [[SRC]], i32 6
; CHECK-NEXT:    [[DST_GEP_I818:%.*]] = getelementptr i8, ptr [[DST]], i32 6
; CHECK-NEXT:    [[TMP11:%.*]] = load i8, ptr [[SRC_GEP_I817]], align 1
; CHECK-NEXT:    store i8 [[TMP11]], ptr [[DST_GEP_I818]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  switch i32 %size, label %return [
  i32 1, label %sw.bb1
  i32 2, label %sw.bb2
  i32 3, label %sw.bb3
  i32 4, label %sw.bb4
  i32 5, label %sw.bb5
  i32 6, label %sw.bb6
  i32 7, label %sw.bb7
  ]

return:                                           ; preds = %sw.bb7, %sw.bb6, %sw.bb5, %sw.bb4, %sw.bb3, %sw.bb2, %sw.bb1, %entry
  ret void

sw.bb1:                                           ; preds = %entry
  %src.gep.i8 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i8 = getelementptr i8, ptr %dst, i32 0
  %0 = load i8, ptr %src.gep.i8, align 1
  store i8 %0, ptr %dst.gep.i8, align 1
  br label %return

sw.bb2:                                           ; preds = %entry
  %src.gep.i16 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i16 = getelementptr i8, ptr %dst, i32 0
  %1 = load i16, ptr %src.gep.i16, align 2
  store i16 %1, ptr %dst.gep.i16, align 2
  br label %return

sw.bb3:                                           ; preds = %entry
  %src.gep.i161 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i162 = getelementptr i8, ptr %dst, i32 0
  %2 = load i16, ptr %src.gep.i161, align 2
  store i16 %2, ptr %dst.gep.i162, align 2
  %src.gep.i83 = getelementptr i8, ptr %src, i32 2
  %dst.gep.i84 = getelementptr i8, ptr %dst, i32 2
  %3 = load i8, ptr %src.gep.i83, align 1
  store i8 %3, ptr %dst.gep.i84, align 1
  br label %return

sw.bb4:                                           ; preds = %entry
  %src.gep.i32 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i32 = getelementptr i8, ptr %dst, i32 0
  %4 = load i32, ptr %src.gep.i32, align 4
  store i32 %4, ptr %dst.gep.i32, align 4
  br label %return

sw.bb5:                                           ; preds = %entry
  %src.gep.i325 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i326 = getelementptr i8, ptr %dst, i32 0
  %5 = load i32, ptr %src.gep.i325, align 4
  store i32 %5, ptr %dst.gep.i326, align 4
  %src.gep.i87 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i88 = getelementptr i8, ptr %dst, i32 4
  %6 = load i8, ptr %src.gep.i87, align 1
  store i8 %6, ptr %dst.gep.i88, align 1
  br label %return

sw.bb6:                                           ; preds = %entry
  %src.gep.i329 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3210 = getelementptr i8, ptr %dst, i32 0
  %7 = load i32, ptr %src.gep.i329, align 4
  store i32 %7, ptr %dst.gep.i3210, align 4
  %src.gep.i1611 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1612 = getelementptr i8, ptr %dst, i32 4
  %8 = load i16, ptr %src.gep.i1611, align 2
  store i16 %8, ptr %dst.gep.i1612, align 2
  br label %return

sw.bb7:                                           ; preds = %entry
  %src.gep.i3213 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3214 = getelementptr i8, ptr %dst, i32 0
  %9 = load i32, ptr %src.gep.i3213, align 4
  store i32 %9, ptr %dst.gep.i3214, align 4
  %src.gep.i1615 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1616 = getelementptr i8, ptr %dst, i32 4
  %10 = load i16, ptr %src.gep.i1615, align 2
  store i16 %10, ptr %dst.gep.i1616, align 2
  %src.gep.i817 = getelementptr i8, ptr %src, i32 6
  %dst.gep.i818 = getelementptr i8, ptr %dst, i32 6
  %11 = load i8, ptr %src.gep.i817, align 1
  store i8 %11, ptr %dst.gep.i818, align 1
  br label %return
}

; Function Attrs: nounwind
declare i32 @llvm.riscv.esp.vld.l.64.ip(i32, i32 immarg, i32 immarg) #13

; Function Attrs: nounwind
declare i32 @llvm.riscv.esp.vst.l.64.ip(i32 immarg, i32, i32 immarg) #13

; Function Attrs: nounwind
declare i32 @llvm.riscv.esp.vld.128.ip(i32, i32 immarg, i32 immarg) #13

; Function Attrs: nounwind
declare i32 @llvm.riscv.esp.vst.128.ip(i32 immarg, i32, i32 immarg) #13

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc16Dst8Var(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc16Dst8Var(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[CMP:%.*]] = icmp ult i32 [[TMP2]], 8
; CHECK-NEXT:    br i1 [[CMP]], label %[[HANDLE_SMALL_SIZE:.*]], label %[[CHECK_MID_RANGE:.*]]
; CHECK:       [[HANDLE_SMALL_SIZE]]:
; CHECK-NEXT:    [[TMP3:%.*]] = inttoptr i32 [[TMP0]] to ptr
; CHECK-NEXT:    [[TMP4:%.*]] = inttoptr i32 [[TMP1]] to ptr
; CHECK-NEXT:    tail call void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr [[TMP3]], ptr [[TMP4]], i32 [[TMP2]])
; CHECK-NEXT:    br label %[[RETURN:.*]]
; CHECK:       [[CHECK_MID_RANGE]]:
; CHECK-NEXT:    [[CMP1:%.*]] = icmp ult i32 [[TMP2]], 16
; CHECK-NEXT:    br i1 [[CMP1]], label %[[HANDLE_MID_SIZE:.*]], label %[[HANDLE_LARGE_LOOP:.*]]
; CHECK:       [[HANDLE_MID_SIZE]]:
; CHECK-NEXT:    [[VLDL64IP:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[TMP1]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[TMP0]], i32 8)
; CHECK-NEXT:    [[TMP5:%.*]] = inttoptr i32 [[VSTL64IP]] to ptr
; CHECK-NEXT:    [[TMP6:%.*]] = inttoptr i32 [[VLDL64IP]] to ptr
; CHECK-NEXT:    [[SUB:%.*]] = add nsw i32 [[TMP2]], -8
; CHECK-NEXT:    call void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr [[TMP5]], ptr [[TMP6]], i32 [[SUB]])
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[HANDLE_LARGE_LOOP]]:
; CHECK-NEXT:    [[DIV94:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[REM:%.*]] = lshr i32 [[TMP2]], 4
; CHECK-NEXT:    [[DIV195:%.*]] = and i32 [[REM]], 7
; CHECK-NEXT:    [[REM4:%.*]] = and i32 [[TMP2]], 7
; CHECK-NEXT:    [[CMP97_NOT:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[CMP97_NOT]], label %[[LOOP_EXIT_CLEANUP:.*]], label %[[LOOP_BODY_128B:.*]]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[LOOP_EXIT_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLD128IP7:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VSTH64IP22:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    switch i32 [[DIV195]], label %[[INVALID_SWITCH_TRAP:.*]] [
; CHECK-NEXT:      i32 1, label %[[TAIL_CASE_1:.*]]
; CHECK-NEXT:      i32 2, label %[[TAIL_CASE_2:.*]]
; CHECK-NEXT:      i32 3, label %[[TAIL_CASE_3:.*]]
; CHECK-NEXT:      i32 4, label %[[TAIL_CASE_4:.*]]
; CHECK-NEXT:      i32 5, label %[[TAIL_CASE_5:.*]]
; CHECK-NEXT:      i32 6, label %[[TAIL_CASE_6:.*]]
; CHECK-NEXT:      i32 7, label %[[TAIL_CASE_7:.*]]
; CHECK-NEXT:      i32 0, label %[[HANDLE_TAIL_SWITCH:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[LOOP_BODY_128B]]:
; CHECK-NEXT:    [[I_098:%.*]] = phi i32 [ 0, %[[HANDLE_LARGE_LOOP]] ], [ [[INC:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[SRC_PTR_PHI:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLD128IP7]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_PHI:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VSTH64IP22]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[VLD128IP:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_PHI]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP1:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP2:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP1]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP3:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP2]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP4:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP3]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP5:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP4]], i32 16, i32 5)
; CHECK-NEXT:    [[VLD128IP6:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP5]], i32 16, i32 6)
; CHECK-NEXT:    [[VLD128IP7]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP6]], i32 16, i32 7)
; CHECK-NEXT:    [[VSTL64IP8:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_PHI]], i32 8)
; CHECK-NEXT:    [[VSTH64IP:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP8]], i32 8)
; CHECK-NEXT:    [[VSTL64IP9:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP10:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP9]], i32 8)
; CHECK-NEXT:    [[VSTL64IP11:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP10]], i32 8)
; CHECK-NEXT:    [[VSTH64IP12:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP11]], i32 8)
; CHECK-NEXT:    [[VSTL64IP13:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP12]], i32 8)
; CHECK-NEXT:    [[VSTH64IP14:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP13]], i32 8)
; CHECK-NEXT:    [[VSTL64IP15:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP14]], i32 8)
; CHECK-NEXT:    [[VSTH64IP16:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP15]], i32 8)
; CHECK-NEXT:    [[VSTL64IP17:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP16]], i32 8)
; CHECK-NEXT:    [[VSTH64IP18:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP17]], i32 8)
; CHECK-NEXT:    [[VSTL64IP19:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 [[VSTH64IP18]], i32 8)
; CHECK-NEXT:    [[VSTH64IP20:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 [[VSTL64IP19]], i32 8)
; CHECK-NEXT:    [[VSTL64IP21:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 [[VSTH64IP20]], i32 8)
; CHECK-NEXT:    [[VSTH64IP22]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 [[VSTL64IP21]], i32 8)
; CHECK-NEXT:    [[INC]] = add nuw nsw i32 [[I_098]], 1
; CHECK-NEXT:    [[EXITCOND_NOT:%.*]] = icmp eq i32 [[INC]], [[DIV94]]
; CHECK-NEXT:    br i1 [[EXITCOND_NOT]], label %[[LOOP_EXIT_CLEANUP]], label %[[LOOP_BODY_128B]]
; CHECK:       [[HANDLE_TAIL_SWITCH]]:
; CHECK-NEXT:    [[SRC_PTR_EPILOG:%.*]] = phi i32 [ [[SRC_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VLD128IP23:%.*]], %[[TAIL_CASE_1]] ], [ [[VLD128IP27:%.*]], %[[TAIL_CASE_2]] ], [ [[VLD128IP34:%.*]], %[[TAIL_CASE_3]] ], [ [[VLD128IP44:%.*]], %[[TAIL_CASE_4]] ], [ [[VLD128IP57:%.*]], %[[TAIL_CASE_5]] ], [ [[VLD128IP73:%.*]], %[[TAIL_CASE_6]] ], [ [[VLD128IP92:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[DST_PTR_EPILOG:%.*]] = phi i32 [ [[DST_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VSTH64IP25:%.*]], %[[TAIL_CASE_1]] ], [ [[VSTH64IP31:%.*]], %[[TAIL_CASE_2]] ], [ [[VSTH64IP40:%.*]], %[[TAIL_CASE_3]] ], [ [[VSTH64IP52:%.*]], %[[TAIL_CASE_4]] ], [ [[VSTH64IP67:%.*]], %[[TAIL_CASE_5]] ], [ [[VSTH64IP85:%.*]], %[[TAIL_CASE_6]] ], [ [[VSTH64IP106:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[TMP7:%.*]] = and i32 [[TMP2]], 8
; CHECK-NEXT:    [[TMP8:%.*]] = icmp eq i32 [[TMP7]], 0
; CHECK-NEXT:    br i1 [[TMP8]], label %[[AFTER_8B_TAIL:.*]], label %[[HANDLE_8B_TAIL:.*]]
; CHECK:       [[INVALID_SWITCH_TRAP]]:
; CHECK-NEXT:    unreachable
; CHECK:       [[HANDLE_8B_TAIL]]:
; CHECK-NEXT:    [[VLDL64IP107:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_EPILOG]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP108:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_EPILOG]], i32 8)
; CHECK-NEXT:    br label %[[AFTER_8B_TAIL]]
; CHECK:       [[AFTER_8B_TAIL]]:
; CHECK-NEXT:    [[SRC_PTR_END17:%.*]] = phi i32 [ [[SRC_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VLDL64IP107]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[DST_PTR_END17:%.*]] = phi i32 [ [[DST_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VSTL64IP108]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[TMP9:%.*]] = icmp eq i32 [[REM4]], 0
; CHECK-NEXT:    br i1 [[TMP9]], label %[[RETURN]], label %[[HANDLE_REMAINING_BYTES:.*]]
; CHECK:       [[TAIL_CASE_1]]:
; CHECK-NEXT:    [[VLD128IP23]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VSTL64IP24:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP25]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP24]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_2]]:
; CHECK-NEXT:    [[VLD128IP26:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP27]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP26]], i32 16, i32 1)
; CHECK-NEXT:    [[VSTL64IP28:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP29:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP28]], i32 8)
; CHECK-NEXT:    [[VSTL64IP30:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP29]], i32 8)
; CHECK-NEXT:    [[VSTH64IP31]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP30]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_3]]:
; CHECK-NEXT:    [[VLD128IP32:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP33:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP32]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP34]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP33]], i32 16, i32 2)
; CHECK-NEXT:    [[VSTL64IP35:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP36:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP35]], i32 8)
; CHECK-NEXT:    [[VSTL64IP37:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP36]], i32 8)
; CHECK-NEXT:    [[VSTH64IP38:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP37]], i32 8)
; CHECK-NEXT:    [[VSTL64IP39:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP38]], i32 8)
; CHECK-NEXT:    [[VSTH64IP40]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP39]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_4]]:
; CHECK-NEXT:    [[VLD128IP41:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP42:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP41]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP43:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP42]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP44]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP43]], i32 16, i32 3)
; CHECK-NEXT:    [[VSTL64IP45:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP46:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP45]], i32 8)
; CHECK-NEXT:    [[VSTL64IP47:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP46]], i32 8)
; CHECK-NEXT:    [[VSTH64IP48:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP47]], i32 8)
; CHECK-NEXT:    [[VSTL64IP49:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP48]], i32 8)
; CHECK-NEXT:    [[VSTH64IP50:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP49]], i32 8)
; CHECK-NEXT:    [[VSTL64IP51:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP50]], i32 8)
; CHECK-NEXT:    [[VSTH64IP52]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP51]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_5]]:
; CHECK-NEXT:    [[VLD128IP53:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP54:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP53]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP55:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP54]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP56:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP55]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP57]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP56]], i32 16, i32 4)
; CHECK-NEXT:    [[VSTL64IP58:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP59:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP58]], i32 8)
; CHECK-NEXT:    [[VSTL64IP60:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP59]], i32 8)
; CHECK-NEXT:    [[VSTH64IP61:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP60]], i32 8)
; CHECK-NEXT:    [[VSTL64IP62:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP61]], i32 8)
; CHECK-NEXT:    [[VSTH64IP63:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP62]], i32 8)
; CHECK-NEXT:    [[VSTL64IP64:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP63]], i32 8)
; CHECK-NEXT:    [[VSTH64IP65:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP64]], i32 8)
; CHECK-NEXT:    [[VSTL64IP66:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP65]], i32 8)
; CHECK-NEXT:    [[VSTH64IP67]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP66]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_6]]:
; CHECK-NEXT:    [[VLD128IP68:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP69:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP68]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP70:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP69]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP71:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP70]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP72:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP71]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP73]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP72]], i32 16, i32 5)
; CHECK-NEXT:    [[VSTL64IP74:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP75:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP74]], i32 8)
; CHECK-NEXT:    [[VSTL64IP76:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP75]], i32 8)
; CHECK-NEXT:    [[VSTH64IP77:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP76]], i32 8)
; CHECK-NEXT:    [[VSTL64IP78:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP77]], i32 8)
; CHECK-NEXT:    [[VSTH64IP79:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP78]], i32 8)
; CHECK-NEXT:    [[VSTL64IP80:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP79]], i32 8)
; CHECK-NEXT:    [[VSTH64IP81:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP80]], i32 8)
; CHECK-NEXT:    [[VSTL64IP82:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP81]], i32 8)
; CHECK-NEXT:    [[VSTH64IP83:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP82]], i32 8)
; CHECK-NEXT:    [[VSTL64IP84:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP83]], i32 8)
; CHECK-NEXT:    [[VSTH64IP85]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP84]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_7]]:
; CHECK-NEXT:    [[VLD128IP86:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP87:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP86]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP88:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP87]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP89:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP88]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP90:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP89]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP91:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP90]], i32 16, i32 5)
; CHECK-NEXT:    [[VLD128IP92]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP91]], i32 16, i32 6)
; CHECK-NEXT:    [[VSTL64IP93:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP94:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP93]], i32 8)
; CHECK-NEXT:    [[VSTL64IP95:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP94]], i32 8)
; CHECK-NEXT:    [[VSTH64IP96:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP95]], i32 8)
; CHECK-NEXT:    [[VSTL64IP97:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP96]], i32 8)
; CHECK-NEXT:    [[VSTH64IP98:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP97]], i32 8)
; CHECK-NEXT:    [[VSTL64IP99:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP98]], i32 8)
; CHECK-NEXT:    [[VSTH64IP100:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP99]], i32 8)
; CHECK-NEXT:    [[VSTL64IP101:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP100]], i32 8)
; CHECK-NEXT:    [[VSTH64IP102:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP101]], i32 8)
; CHECK-NEXT:    [[VSTL64IP103:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP102]], i32 8)
; CHECK-NEXT:    [[VSTH64IP104:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP103]], i32 8)
; CHECK-NEXT:    [[VSTL64IP105:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 [[VSTH64IP104]], i32 8)
; CHECK-NEXT:    [[VSTH64IP106]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 [[VSTL64IP105]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[HANDLE_REMAINING_BYTES]]:
; CHECK-NEXT:    [[TMP10:%.*]] = inttoptr i32 [[SRC_PTR_END17]] to ptr
; CHECK-NEXT:    [[TMP11:%.*]] = inttoptr i32 [[DST_PTR_END17]] to ptr
; CHECK-NEXT:    call void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr [[TMP11]], ptr [[TMP10]], i32 [[REM4]])
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  %is.lt.8 = icmp ult i32 %2, 8
  br i1 %is.lt.8, label %handle.small.size, label %check.mid.range

handle.small.size:                                ; preds = %entry
  %3 = inttoptr i32 %0 to ptr
  %4 = inttoptr i32 %1 to ptr
  tail call void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr %3, ptr %4, i32 %2)
  br label %return

check.mid.range:                                  ; preds = %entry
  %is.lt.16 = icmp ult i32 %2, 16
  br i1 %is.lt.16, label %handle.mid.size, label %handle.large.loop

handle.mid.size:                                  ; preds = %check.mid.range
  %vldl64ip = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %1, i32 8, i32 0)
  %vstl64ip = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %0, i32 8)
  %5 = inttoptr i32 %vstl64ip to ptr
  %6 = inttoptr i32 %vldl64ip to ptr
  %size.minus.8 = add nsw i32 %2, -8
  call void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr %5, ptr %6, i32 %size.minus.8)
  br label %return

handle.large.loop:                                ; preds = %check.mid.range
  %num.128B.blocks = lshr i32 %2, 7
  %num.16B.blocks = lshr i32 %2, 4
  %remaining.16B.blocks = and i32 %num.16B.blocks, 7
  %remaining.bytes = and i32 %2, 7
  %is.lt.128 = icmp ult i32 %2, 128
  br i1 %is.lt.128, label %loop.exit.cleanup, label %loop.body.128B

return:                                           ; preds = %handle.remaining.bytes, %after.8B.tail, %handle.mid.size, %handle.small.size
  ret void

loop.exit.cleanup:                                ; preds = %loop.body.128B, %handle.large.loop
  %src.ptr.after.loop = phi i32 [ %1, %handle.large.loop ], [ %vld128ip7, %loop.body.128B ]
  %dst.ptr.after.loop = phi i32 [ %0, %handle.large.loop ], [ %vsth64ip22, %loop.body.128B ]
  switch i32 %remaining.16B.blocks, label %invalid.switch.trap [
  i32 1, label %tail.case.1
  i32 2, label %tail.case.2
  i32 3, label %tail.case.3
  i32 4, label %tail.case.4
  i32 5, label %tail.case.5
  i32 6, label %tail.case.6
  i32 7, label %tail.case.7
  i32 0, label %handle.tail.switch
  ]

loop.body.128B:                                   ; preds = %loop.body.128B, %handle.large.loop
  %loop.index = phi i32 [ 0, %handle.large.loop ], [ %loop.inc, %loop.body.128B ]
  %src.ptr.loop = phi i32 [ %1, %handle.large.loop ], [ %vld128ip7, %loop.body.128B ]
  %dst.ptr.loop = phi i32 [ %0, %handle.large.loop ], [ %vsth64ip22, %loop.body.128B ]
  %vld128ip = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.loop, i32 16, i32 0)
  %vld128ip1 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip, i32 16, i32 1)
  %vld128ip2 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip1, i32 16, i32 2)
  %vld128ip3 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip2, i32 16, i32 3)
  %vld128ip4 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip3, i32 16, i32 4)
  %vld128ip5 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip4, i32 16, i32 5)
  %vld128ip6 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip5, i32 16, i32 6)
  %vld128ip7 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip6, i32 16, i32 7)
  %vstl64ip8 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.loop, i32 8)
  %vsth64ip = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip8, i32 8)
  %vstl64ip9 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip, i32 8)
  %vsth64ip10 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip9, i32 8)
  %vstl64ip11 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip10, i32 8)
  %vsth64ip12 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip11, i32 8)
  %vstl64ip13 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip12, i32 8)
  %vsth64ip14 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip13, i32 8)
  %vstl64ip15 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip14, i32 8)
  %vsth64ip16 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip15, i32 8)
  %vstl64ip17 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip16, i32 8)
  %vsth64ip18 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip17, i32 8)
  %vstl64ip19 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 %vsth64ip18, i32 8)
  %vsth64ip20 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 %vstl64ip19, i32 8)
  %vstl64ip21 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 %vsth64ip20, i32 8)
  %vsth64ip22 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 %vstl64ip21, i32 8)
  %loop.inc = add nuw nsw i32 %loop.index, 1
  %loop.done = icmp eq i32 %loop.inc, %num.128B.blocks
  br i1 %loop.done, label %loop.exit.cleanup, label %loop.body.128B

handle.tail.switch:                               ; preds = %loop.exit.cleanup, %tail.case.7, %tail.case.6, %tail.case.5, %tail.case.4, %tail.case.3, %tail.case.2, %tail.case.1
  %src.ptr.tail = phi i32 [ %src.ptr.after.loop, %loop.exit.cleanup ], [ %vld128ip23, %tail.case.1 ], [ %vld128ip27, %tail.case.2 ], [ %vld128ip34, %tail.case.3 ], [ %vld128ip44, %tail.case.4 ], [ %vld128ip57, %tail.case.5 ], [ %vld128ip73, %tail.case.6 ], [ %vld128ip92, %tail.case.7 ]
  %dst.ptr.tail = phi i32 [ %dst.ptr.after.loop, %loop.exit.cleanup ], [ %vsth64ip25, %tail.case.1 ], [ %vsth64ip31, %tail.case.2 ], [ %vsth64ip40, %tail.case.3 ], [ %vsth64ip52, %tail.case.4 ], [ %vsth64ip67, %tail.case.5 ], [ %vsth64ip85, %tail.case.6 ], [ %vsth64ip106, %tail.case.7 ]
  %7 = and i32 %2, 8
  %8 = icmp eq i32 %7, 0
  br i1 %8, label %after.8B.tail, label %handle.8B.tail

invalid.switch.trap:                              ; preds = %loop.exit.cleanup
  unreachable

handle.8B.tail:                                   ; preds = %handle.tail.switch
  %vldl64ip107 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.tail, i32 8, i32 0)
  %vstl64ip108 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.tail, i32 8)
  br label %after.8B.tail

after.8B.tail:                                    ; preds = %handle.8B.tail, %handle.tail.switch
  %src.ptr.after.8B = phi i32 [ %src.ptr.tail, %handle.tail.switch ], [ %vldl64ip107, %handle.8B.tail ]
  %dst.ptr.after.8B = phi i32 [ %dst.ptr.tail, %handle.tail.switch ], [ %vstl64ip108, %handle.8B.tail ]
  %9 = icmp eq i32 %remaining.bytes, 0
  br i1 %9, label %return, label %handle.remaining.bytes

tail.case.1:                                      ; preds = %loop.exit.cleanup
  %vld128ip23 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vstl64ip24 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip25 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip24, i32 8)
  br label %handle.tail.switch

tail.case.2:                                      ; preds = %loop.exit.cleanup
  %vld128ip26 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip27 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip26, i32 16, i32 1)
  %vstl64ip28 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip29 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip28, i32 8)
  %vstl64ip30 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip29, i32 8)
  %vsth64ip31 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip30, i32 8)
  br label %handle.tail.switch

tail.case.3:                                      ; preds = %loop.exit.cleanup
  %vld128ip32 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip33 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip32, i32 16, i32 1)
  %vld128ip34 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip33, i32 16, i32 2)
  %vstl64ip35 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip36 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip35, i32 8)
  %vstl64ip37 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip36, i32 8)
  %vsth64ip38 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip37, i32 8)
  %vstl64ip39 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip38, i32 8)
  %vsth64ip40 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip39, i32 8)
  br label %handle.tail.switch

tail.case.4:                                      ; preds = %loop.exit.cleanup
  %vld128ip41 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip42 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip41, i32 16, i32 1)
  %vld128ip43 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip42, i32 16, i32 2)
  %vld128ip44 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip43, i32 16, i32 3)
  %vstl64ip45 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip46 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip45, i32 8)
  %vstl64ip47 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip46, i32 8)
  %vsth64ip48 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip47, i32 8)
  %vstl64ip49 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip48, i32 8)
  %vsth64ip50 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip49, i32 8)
  %vstl64ip51 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip50, i32 8)
  %vsth64ip52 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip51, i32 8)
  br label %handle.tail.switch

tail.case.5:                                      ; preds = %loop.exit.cleanup
  %vld128ip53 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip54 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip53, i32 16, i32 1)
  %vld128ip55 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip54, i32 16, i32 2)
  %vld128ip56 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip55, i32 16, i32 3)
  %vld128ip57 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip56, i32 16, i32 4)
  %vstl64ip58 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip59 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip58, i32 8)
  %vstl64ip60 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip59, i32 8)
  %vsth64ip61 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip60, i32 8)
  %vstl64ip62 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip61, i32 8)
  %vsth64ip63 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip62, i32 8)
  %vstl64ip64 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip63, i32 8)
  %vsth64ip65 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip64, i32 8)
  %vstl64ip66 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip65, i32 8)
  %vsth64ip67 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip66, i32 8)
  br label %handle.tail.switch

tail.case.6:                                      ; preds = %loop.exit.cleanup
  %vld128ip68 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip69 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip68, i32 16, i32 1)
  %vld128ip70 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip69, i32 16, i32 2)
  %vld128ip71 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip70, i32 16, i32 3)
  %vld128ip72 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip71, i32 16, i32 4)
  %vld128ip73 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip72, i32 16, i32 5)
  %vstl64ip74 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip75 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip74, i32 8)
  %vstl64ip76 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip75, i32 8)
  %vsth64ip77 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip76, i32 8)
  %vstl64ip78 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip77, i32 8)
  %vsth64ip79 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip78, i32 8)
  %vstl64ip80 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip79, i32 8)
  %vsth64ip81 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip80, i32 8)
  %vstl64ip82 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip81, i32 8)
  %vsth64ip83 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip82, i32 8)
  %vstl64ip84 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip83, i32 8)
  %vsth64ip85 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip84, i32 8)
  br label %handle.tail.switch

tail.case.7:                                      ; preds = %loop.exit.cleanup
  %vld128ip86 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.after.loop, i32 16, i32 0)
  %vld128ip87 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip86, i32 16, i32 1)
  %vld128ip88 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip87, i32 16, i32 2)
  %vld128ip89 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip88, i32 16, i32 3)
  %vld128ip90 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip89, i32 16, i32 4)
  %vld128ip91 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip90, i32 16, i32 5)
  %vld128ip92 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip91, i32 16, i32 6)
  %vstl64ip93 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip94 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip93, i32 8)
  %vstl64ip95 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip94, i32 8)
  %vsth64ip96 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip95, i32 8)
  %vstl64ip97 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip96, i32 8)
  %vsth64ip98 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip97, i32 8)
  %vstl64ip99 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip98, i32 8)
  %vsth64ip100 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip99, i32 8)
  %vstl64ip101 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip100, i32 8)
  %vsth64ip102 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip101, i32 8)
  %vstl64ip103 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip102, i32 8)
  %vsth64ip104 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip103, i32 8)
  %vstl64ip105 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 %vsth64ip104, i32 8)
  %vsth64ip106 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 %vstl64ip105, i32 8)
  br label %handle.tail.switch

handle.remaining.bytes:                           ; preds = %after.8B.tail
  %10 = inttoptr i32 %src.ptr.after.8B to ptr
  %11 = inttoptr i32 %dst.ptr.after.8B to ptr
  call void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr %11, ptr %10, i32 %remaining.bytes)
  br label %return
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc16Dst8From1To7Opt(ptr %dst, ptr %src, i32 %size)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc16Dst8From1To7Opt(
; CHECK-SAME: ptr [[DST:%.*]], ptr [[SRC:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    switch i32 [[SIZE]], label %[[RETURN:.*]] [
; CHECK-NEXT:      i32 1, label %[[SW_BB1:.*]]
; CHECK-NEXT:      i32 2, label %[[SW_BB2:.*]]
; CHECK-NEXT:      i32 3, label %[[SW_BB3:.*]]
; CHECK-NEXT:      i32 4, label %[[SW_BB4:.*]]
; CHECK-NEXT:      i32 5, label %[[SW_BB5:.*]]
; CHECK-NEXT:      i32 6, label %[[SW_BB6:.*]]
; CHECK-NEXT:      i32 7, label %[[SW_BB7:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[SW_BB1]]:
; CHECK-NEXT:    [[SRC_GEP_I8:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I8:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP0:%.*]] = load i8, ptr [[SRC_GEP_I8]], align 1
; CHECK-NEXT:    store i8 [[TMP0]], ptr [[DST_GEP_I8]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB2]]:
; CHECK-NEXT:    [[SRC_GEP_I16:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I16:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP1:%.*]] = load i16, ptr [[SRC_GEP_I16]], align 2
; CHECK-NEXT:    store i16 [[TMP1]], ptr [[DST_GEP_I16]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB3]]:
; CHECK-NEXT:    [[SRC_GEP_I161:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I162:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP2:%.*]] = load i16, ptr [[SRC_GEP_I161]], align 2
; CHECK-NEXT:    store i16 [[TMP2]], ptr [[DST_GEP_I162]], align 2
; CHECK-NEXT:    [[SRC_GEP_I83:%.*]] = getelementptr i8, ptr [[SRC]], i32 2
; CHECK-NEXT:    [[DST_GEP_I84:%.*]] = getelementptr i8, ptr [[DST]], i32 2
; CHECK-NEXT:    [[TMP3:%.*]] = load i8, ptr [[SRC_GEP_I83]], align 1
; CHECK-NEXT:    store i8 [[TMP3]], ptr [[DST_GEP_I84]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB4]]:
; CHECK-NEXT:    [[SRC_GEP_I32:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I32:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr [[SRC_GEP_I32]], align 4
; CHECK-NEXT:    store i32 [[TMP4]], ptr [[DST_GEP_I32]], align 4
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB5]]:
; CHECK-NEXT:    [[SRC_GEP_I325:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I326:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr [[SRC_GEP_I325]], align 4
; CHECK-NEXT:    store i32 [[TMP5]], ptr [[DST_GEP_I326]], align 4
; CHECK-NEXT:    [[SRC_GEP_I87:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I88:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP6:%.*]] = load i8, ptr [[SRC_GEP_I87]], align 1
; CHECK-NEXT:    store i8 [[TMP6]], ptr [[DST_GEP_I88]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB6]]:
; CHECK-NEXT:    [[SRC_GEP_I329:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3210:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP7:%.*]] = load i32, ptr [[SRC_GEP_I329]], align 4
; CHECK-NEXT:    store i32 [[TMP7]], ptr [[DST_GEP_I3210]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1611:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1612:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP8:%.*]] = load i16, ptr [[SRC_GEP_I1611]], align 2
; CHECK-NEXT:    store i16 [[TMP8]], ptr [[DST_GEP_I1612]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB7]]:
; CHECK-NEXT:    [[SRC_GEP_I3213:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3214:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP9:%.*]] = load i32, ptr [[SRC_GEP_I3213]], align 4
; CHECK-NEXT:    store i32 [[TMP9]], ptr [[DST_GEP_I3214]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1615:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1616:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP10:%.*]] = load i16, ptr [[SRC_GEP_I1615]], align 2
; CHECK-NEXT:    store i16 [[TMP10]], ptr [[DST_GEP_I1616]], align 2
; CHECK-NEXT:    [[SRC_GEP_I817:%.*]] = getelementptr i8, ptr [[SRC]], i32 6
; CHECK-NEXT:    [[DST_GEP_I818:%.*]] = getelementptr i8, ptr [[DST]], i32 6
; CHECK-NEXT:    [[TMP11:%.*]] = load i8, ptr [[SRC_GEP_I817]], align 1
; CHECK-NEXT:    store i8 [[TMP11]], ptr [[DST_GEP_I818]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  switch i32 %size, label %return [
  i32 1, label %sw.bb1
  i32 2, label %sw.bb2
  i32 3, label %sw.bb3
  i32 4, label %sw.bb4
  i32 5, label %sw.bb5
  i32 6, label %sw.bb6
  i32 7, label %sw.bb7
  ]

return:                                           ; preds = %sw.bb7, %sw.bb6, %sw.bb5, %sw.bb4, %sw.bb3, %sw.bb2, %sw.bb1, %entry
  ret void

sw.bb1:                                           ; preds = %entry
  %src.gep.i8 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i8 = getelementptr i8, ptr %dst, i32 0
  %0 = load i8, ptr %src.gep.i8, align 1
  store i8 %0, ptr %dst.gep.i8, align 1
  br label %return

sw.bb2:                                           ; preds = %entry
  %src.gep.i16 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i16 = getelementptr i8, ptr %dst, i32 0
  %1 = load i16, ptr %src.gep.i16, align 2
  store i16 %1, ptr %dst.gep.i16, align 2
  br label %return

sw.bb3:                                           ; preds = %entry
  %src.gep.i161 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i162 = getelementptr i8, ptr %dst, i32 0
  %2 = load i16, ptr %src.gep.i161, align 2
  store i16 %2, ptr %dst.gep.i162, align 2
  %src.gep.i83 = getelementptr i8, ptr %src, i32 2
  %dst.gep.i84 = getelementptr i8, ptr %dst, i32 2
  %3 = load i8, ptr %src.gep.i83, align 1
  store i8 %3, ptr %dst.gep.i84, align 1
  br label %return

sw.bb4:                                           ; preds = %entry
  %src.gep.i32 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i32 = getelementptr i8, ptr %dst, i32 0
  %4 = load i32, ptr %src.gep.i32, align 4
  store i32 %4, ptr %dst.gep.i32, align 4
  br label %return

sw.bb5:                                           ; preds = %entry
  %src.gep.i325 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i326 = getelementptr i8, ptr %dst, i32 0
  %5 = load i32, ptr %src.gep.i325, align 4
  store i32 %5, ptr %dst.gep.i326, align 4
  %src.gep.i87 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i88 = getelementptr i8, ptr %dst, i32 4
  %6 = load i8, ptr %src.gep.i87, align 1
  store i8 %6, ptr %dst.gep.i88, align 1
  br label %return

sw.bb6:                                           ; preds = %entry
  %src.gep.i329 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3210 = getelementptr i8, ptr %dst, i32 0
  %7 = load i32, ptr %src.gep.i329, align 4
  store i32 %7, ptr %dst.gep.i3210, align 4
  %src.gep.i1611 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1612 = getelementptr i8, ptr %dst, i32 4
  %8 = load i16, ptr %src.gep.i1611, align 2
  store i16 %8, ptr %dst.gep.i1612, align 2
  br label %return

sw.bb7:                                           ; preds = %entry
  %src.gep.i3213 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3214 = getelementptr i8, ptr %dst, i32 0
  %9 = load i32, ptr %src.gep.i3213, align 4
  store i32 %9, ptr %dst.gep.i3214, align 4
  %src.gep.i1615 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1616 = getelementptr i8, ptr %dst, i32 4
  %10 = load i16, ptr %src.gep.i1615, align 2
  store i16 %10, ptr %dst.gep.i1616, align 2
  %src.gep.i817 = getelementptr i8, ptr %src, i32 6
  %dst.gep.i818 = getelementptr i8, ptr %dst, i32 6
  %11 = load i8, ptr %src.gep.i817, align 1
  store i8 %11, ptr %dst.gep.i818, align 1
  br label %return
}

; Function Attrs: nounwind
declare i32 @llvm.riscv.esp.vst.h.64.ip(i32 immarg, i32, i32 immarg) #13

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc8Dst16Var(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc8Dst16Var(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[CMP:%.*]] = icmp ult i32 [[TMP2]], 8
; CHECK-NEXT:    br i1 [[CMP]], label %[[HANDLE_SMALL_SIZE:.*]], label %[[CHECK_MID_RANGE:.*]]
; CHECK:       [[HANDLE_SMALL_SIZE]]:
; CHECK-NEXT:    [[TMP3:%.*]] = inttoptr i32 [[TMP0]] to ptr
; CHECK-NEXT:    [[TMP4:%.*]] = inttoptr i32 [[TMP1]] to ptr
; CHECK-NEXT:    tail call void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr [[TMP3]], ptr [[TMP4]], i32 [[TMP2]])
; CHECK-NEXT:    br label %[[RETURN:.*]]
; CHECK:       [[CHECK_MID_RANGE]]:
; CHECK-NEXT:    [[CMP1:%.*]] = icmp ult i32 [[TMP2]], 16
; CHECK-NEXT:    br i1 [[CMP1]], label %[[HANDLE_MID_SIZE:.*]], label %[[HANDLE_LARGE_LOOP:.*]]
; CHECK:       [[HANDLE_MID_SIZE]]:
; CHECK-NEXT:    [[VLDL64IP:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[TMP1]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[TMP0]], i32 8)
; CHECK-NEXT:    [[TMP5:%.*]] = inttoptr i32 [[VSTL64IP]] to ptr
; CHECK-NEXT:    [[TMP6:%.*]] = inttoptr i32 [[VLDL64IP]] to ptr
; CHECK-NEXT:    [[SUB:%.*]] = add nsw i32 [[TMP2]], -8
; CHECK-NEXT:    call void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr [[TMP5]], ptr [[TMP6]], i32 [[SUB]])
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[HANDLE_LARGE_LOOP]]:
; CHECK-NEXT:    [[DIV94:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[REM:%.*]] = lshr i32 [[TMP2]], 4
; CHECK-NEXT:    [[DIV195:%.*]] = and i32 [[REM]], 7
; CHECK-NEXT:    [[REM4:%.*]] = and i32 [[TMP2]], 7
; CHECK-NEXT:    [[CMP97_NOT:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[CMP97_NOT]], label %[[LOOP_EXIT_CLEANUP:.*]], label %[[LOOP_BODY_128B:.*]]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[LOOP_EXIT_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLDH64IP15:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VST128IP22:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    switch i32 [[DIV195]], label %[[INVALID_SWITCH_TRAP:.*]] [
; CHECK-NEXT:      i32 1, label %[[TAIL_CASE_1:.*]]
; CHECK-NEXT:      i32 2, label %[[TAIL_CASE_2:.*]]
; CHECK-NEXT:      i32 3, label %[[TAIL_CASE_3:.*]]
; CHECK-NEXT:      i32 4, label %[[TAIL_CASE_4:.*]]
; CHECK-NEXT:      i32 5, label %[[TAIL_CASE_5:.*]]
; CHECK-NEXT:      i32 6, label %[[TAIL_CASE_6:.*]]
; CHECK-NEXT:      i32 7, label %[[TAIL_CASE_7:.*]]
; CHECK-NEXT:      i32 0, label %[[HANDLE_TAIL_SWITCH:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[LOOP_BODY_128B]]:
; CHECK-NEXT:    [[I_098:%.*]] = phi i32 [ 0, %[[HANDLE_LARGE_LOOP]] ], [ [[INC:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[SRC_PTR_PHI:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLDH64IP15]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_PHI:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VST128IP22]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[VLDL64IP1:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_PHI]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP1]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP2:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP3:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP2]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP4:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP3]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP5:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP4]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP6:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP5]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP7:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP6]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP8:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP7]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP9:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP8]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP10:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP9]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP11:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP10]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDL64IP12:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP11]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDH64IP13:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP12]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDL64IP14:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP13]], i32 8, i32 7)
; CHECK-NEXT:    [[VLDH64IP15]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP14]], i32 8, i32 7)
; CHECK-NEXT:    [[VST128IP:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_PHI]], i32 16)
; CHECK-NEXT:    [[VST128IP16:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP]], i32 16)
; CHECK-NEXT:    [[VST128IP17:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP16]], i32 16)
; CHECK-NEXT:    [[VST128IP18:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP17]], i32 16)
; CHECK-NEXT:    [[VST128IP19:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP18]], i32 16)
; CHECK-NEXT:    [[VST128IP20:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP19]], i32 16)
; CHECK-NEXT:    [[VST128IP21:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 [[VST128IP20]], i32 16)
; CHECK-NEXT:    [[VST128IP22]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 [[VST128IP21]], i32 16)
; CHECK-NEXT:    [[INC]] = add nuw nsw i32 [[I_098]], 1
; CHECK-NEXT:    [[EXITCOND_NOT:%.*]] = icmp eq i32 [[INC]], [[DIV94]]
; CHECK-NEXT:    br i1 [[EXITCOND_NOT]], label %[[LOOP_EXIT_CLEANUP]], label %[[LOOP_BODY_128B]]
; CHECK:       [[HANDLE_TAIL_SWITCH]]:
; CHECK-NEXT:    [[SRC_PTR_EPILOG:%.*]] = phi i32 [ [[SRC_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VLDH64IP24:%.*]], %[[TAIL_CASE_1]] ], [ [[VLDH64IP29:%.*]], %[[TAIL_CASE_2]] ], [ [[VLDH64IP37:%.*]], %[[TAIL_CASE_3]] ], [ [[VLDH64IP48:%.*]], %[[TAIL_CASE_4]] ], [ [[VLDH64IP62:%.*]], %[[TAIL_CASE_5]] ], [ [[VLDH64IP79:%.*]], %[[TAIL_CASE_6]] ], [ [[VLDH64IP99:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[DST_PTR_EPILOG:%.*]] = phi i32 [ [[DST_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VST128IP25:%.*]], %[[TAIL_CASE_1]] ], [ [[VST128IP31:%.*]], %[[TAIL_CASE_2]] ], [ [[VST128IP40:%.*]], %[[TAIL_CASE_3]] ], [ [[VST128IP52:%.*]], %[[TAIL_CASE_4]] ], [ [[VST128IP67:%.*]], %[[TAIL_CASE_5]] ], [ [[VST128IP85:%.*]], %[[TAIL_CASE_6]] ], [ [[VST128IP106:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[TMP7:%.*]] = and i32 [[TMP2]], 8
; CHECK-NEXT:    [[TMP8:%.*]] = icmp eq i32 [[TMP7]], 0
; CHECK-NEXT:    br i1 [[TMP8]], label %[[AFTER_8B_TAIL:.*]], label %[[HANDLE_8B_TAIL:.*]]
; CHECK:       [[INVALID_SWITCH_TRAP]]:
; CHECK-NEXT:    unreachable
; CHECK:       [[HANDLE_8B_TAIL]]:
; CHECK-NEXT:    [[VLDL64IP107:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_EPILOG]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP108:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_EPILOG]], i32 8)
; CHECK-NEXT:    br label %[[AFTER_8B_TAIL]]
; CHECK:       [[AFTER_8B_TAIL]]:
; CHECK-NEXT:    [[SRC_PTR_END17:%.*]] = phi i32 [ [[SRC_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VLDL64IP107]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[DST_PTR_END17:%.*]] = phi i32 [ [[DST_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VSTL64IP108]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[TMP9:%.*]] = icmp eq i32 [[REM4]], 0
; CHECK-NEXT:    br i1 [[TMP9]], label %[[RETURN]], label %[[HANDLE_REMAINING_BYTES:.*]]
; CHECK:       [[TAIL_CASE_1]]:
; CHECK-NEXT:    [[VLDL64IP23:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP24]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP23]], i32 8, i32 0)
; CHECK-NEXT:    [[VST128IP25]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_2]]:
; CHECK-NEXT:    [[VLDL64IP26:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP27:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP26]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP28:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP27]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP29]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP28]], i32 8, i32 1)
; CHECK-NEXT:    [[VST128IP30:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP31]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP30]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_3]]:
; CHECK-NEXT:    [[VLDL64IP32:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP33:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP32]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP34:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP33]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP35:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP34]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP36:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP35]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP37]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP36]], i32 8, i32 2)
; CHECK-NEXT:    [[VST128IP38:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP39:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP38]], i32 16)
; CHECK-NEXT:    [[VST128IP40]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP39]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_4]]:
; CHECK-NEXT:    [[VLDL64IP41:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP42:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP41]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP43:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP42]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP44:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP43]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP45:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP44]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP46:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP45]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP47:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP46]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP48]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP47]], i32 8, i32 3)
; CHECK-NEXT:    [[VST128IP49:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP50:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP49]], i32 16)
; CHECK-NEXT:    [[VST128IP51:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP50]], i32 16)
; CHECK-NEXT:    [[VST128IP52]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP51]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_5]]:
; CHECK-NEXT:    [[VLDL64IP53:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP54:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP53]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP55:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP54]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP56:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP55]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP57:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP56]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP58:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP57]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP59:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP58]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP60:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP59]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP61:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP60]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP62]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP61]], i32 8, i32 4)
; CHECK-NEXT:    [[VST128IP63:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP64:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP63]], i32 16)
; CHECK-NEXT:    [[VST128IP65:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP64]], i32 16)
; CHECK-NEXT:    [[VST128IP66:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP65]], i32 16)
; CHECK-NEXT:    [[VST128IP67]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP66]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_6]]:
; CHECK-NEXT:    [[VLDL64IP68:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP69:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP68]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP70:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP69]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP71:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP70]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP72:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP71]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP73:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP72]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP74:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP73]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP75:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP74]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP76:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP75]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP77:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP76]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP78:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP77]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP79]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP78]], i32 8, i32 5)
; CHECK-NEXT:    [[VST128IP80:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP81:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP80]], i32 16)
; CHECK-NEXT:    [[VST128IP82:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP81]], i32 16)
; CHECK-NEXT:    [[VST128IP83:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP82]], i32 16)
; CHECK-NEXT:    [[VST128IP84:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP83]], i32 16)
; CHECK-NEXT:    [[VST128IP85]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP84]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_7]]:
; CHECK-NEXT:    [[VLDL64IP86:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP87:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP86]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP88:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP87]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP89:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP88]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP90:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP89]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP91:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP90]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP92:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP91]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP93:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP92]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP94:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP93]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP95:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP94]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP96:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP95]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP97:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP96]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDL64IP98:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP97]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDH64IP99]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP98]], i32 8, i32 6)
; CHECK-NEXT:    [[VST128IP100:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP101:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP100]], i32 16)
; CHECK-NEXT:    [[VST128IP102:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP101]], i32 16)
; CHECK-NEXT:    [[VST128IP103:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP102]], i32 16)
; CHECK-NEXT:    [[VST128IP104:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP103]], i32 16)
; CHECK-NEXT:    [[VST128IP105:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP104]], i32 16)
; CHECK-NEXT:    [[VST128IP106]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 [[VST128IP105]], i32 16)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[HANDLE_REMAINING_BYTES]]:
; CHECK-NEXT:    [[TMP10:%.*]] = inttoptr i32 [[SRC_PTR_END17]] to ptr
; CHECK-NEXT:    [[TMP11:%.*]] = inttoptr i32 [[DST_PTR_END17]] to ptr
; CHECK-NEXT:    call void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr [[TMP11]], ptr [[TMP10]], i32 [[REM4]])
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  %is.lt.8 = icmp ult i32 %2, 8
  br i1 %is.lt.8, label %handle.small.size, label %check.mid.range

handle.small.size:                                ; preds = %entry
  %3 = inttoptr i32 %0 to ptr
  %4 = inttoptr i32 %1 to ptr
  tail call void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr %3, ptr %4, i32 %2)
  br label %return

check.mid.range:                                  ; preds = %entry
  %is.lt.16 = icmp ult i32 %2, 16
  br i1 %is.lt.16, label %handle.mid.size, label %handle.large.loop

handle.mid.size:                                  ; preds = %check.mid.range
  %vldl64ip = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %1, i32 8, i32 0)
  %vstl64ip = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %0, i32 8)
  %5 = inttoptr i32 %vstl64ip to ptr
  %6 = inttoptr i32 %vldl64ip to ptr
  %size.minus.8 = add nsw i32 %2, -8
  call void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr %5, ptr %6, i32 %size.minus.8)
  br label %return

handle.large.loop:                                ; preds = %check.mid.range
  %num.128B.blocks = lshr i32 %2, 7
  %num.16B.blocks = lshr i32 %2, 4
  %remaining.16B.blocks = and i32 %num.16B.blocks, 7
  %remaining.bytes = and i32 %2, 7
  %is.lt.128 = icmp ult i32 %2, 128
  br i1 %is.lt.128, label %loop.exit.cleanup, label %loop.body.128B

return:                                           ; preds = %handle.remaining.bytes, %after.8B.tail, %handle.mid.size, %handle.small.size
  ret void

loop.exit.cleanup:                                ; preds = %loop.body.128B, %handle.large.loop
  %src.ptr.after.loop = phi i32 [ %1, %handle.large.loop ], [ %vldh64ip15, %loop.body.128B ]
  %dst.ptr.after.loop = phi i32 [ %0, %handle.large.loop ], [ %vst128ip22, %loop.body.128B ]
  switch i32 %remaining.16B.blocks, label %invalid.switch.trap [
  i32 1, label %tail.case.1
  i32 2, label %tail.case.2
  i32 3, label %tail.case.3
  i32 4, label %tail.case.4
  i32 5, label %tail.case.5
  i32 6, label %tail.case.6
  i32 7, label %tail.case.7
  i32 0, label %handle.tail.switch
  ]

loop.body.128B:                                   ; preds = %loop.body.128B, %handle.large.loop
  %loop.index = phi i32 [ 0, %handle.large.loop ], [ %loop.inc, %loop.body.128B ]
  %src.ptr.loop = phi i32 [ %1, %handle.large.loop ], [ %vldh64ip15, %loop.body.128B ]
  %dst.ptr.loop = phi i32 [ %0, %handle.large.loop ], [ %vst128ip22, %loop.body.128B ]
  %vldl64ip1 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.loop, i32 8, i32 0)
  %vldh64ip = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip1, i32 8, i32 0)
  %vldl64ip2 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip, i32 8, i32 1)
  %vldh64ip3 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip2, i32 8, i32 1)
  %vldl64ip4 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip3, i32 8, i32 2)
  %vldh64ip5 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip4, i32 8, i32 2)
  %vldl64ip6 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip5, i32 8, i32 3)
  %vldh64ip7 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip6, i32 8, i32 3)
  %vldl64ip8 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip7, i32 8, i32 4)
  %vldh64ip9 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip8, i32 8, i32 4)
  %vldl64ip10 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip9, i32 8, i32 5)
  %vldh64ip11 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip10, i32 8, i32 5)
  %vldl64ip12 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip11, i32 8, i32 6)
  %vldh64ip13 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip12, i32 8, i32 6)
  %vldl64ip14 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip13, i32 8, i32 7)
  %vldh64ip15 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip14, i32 8, i32 7)
  %vst128ip = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.loop, i32 16)
  %vst128ip16 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip, i32 16)
  %vst128ip17 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip16, i32 16)
  %vst128ip18 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip17, i32 16)
  %vst128ip19 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip18, i32 16)
  %vst128ip20 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip19, i32 16)
  %vst128ip21 = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 %vst128ip20, i32 16)
  %vst128ip22 = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 %vst128ip21, i32 16)
  %loop.inc = add nuw nsw i32 %loop.index, 1
  %loop.done = icmp eq i32 %loop.inc, %num.128B.blocks
  br i1 %loop.done, label %loop.exit.cleanup, label %loop.body.128B

handle.tail.switch:                               ; preds = %loop.exit.cleanup, %tail.case.7, %tail.case.6, %tail.case.5, %tail.case.4, %tail.case.3, %tail.case.2, %tail.case.1
  %src.ptr.tail = phi i32 [ %src.ptr.after.loop, %loop.exit.cleanup ], [ %vldh64ip24, %tail.case.1 ], [ %vldh64ip29, %tail.case.2 ], [ %vldh64ip37, %tail.case.3 ], [ %vldh64ip48, %tail.case.4 ], [ %vldh64ip62, %tail.case.5 ], [ %vldh64ip79, %tail.case.6 ], [ %vldh64ip99, %tail.case.7 ]
  %dst.ptr.tail = phi i32 [ %dst.ptr.after.loop, %loop.exit.cleanup ], [ %vst128ip25, %tail.case.1 ], [ %vst128ip31, %tail.case.2 ], [ %vst128ip40, %tail.case.3 ], [ %vst128ip52, %tail.case.4 ], [ %vst128ip67, %tail.case.5 ], [ %vst128ip85, %tail.case.6 ], [ %vst128ip106, %tail.case.7 ]
  %7 = and i32 %2, 8
  %8 = icmp eq i32 %7, 0
  br i1 %8, label %after.8B.tail, label %handle.8B.tail

invalid.switch.trap:                              ; preds = %loop.exit.cleanup
  unreachable

handle.8B.tail:                                   ; preds = %handle.tail.switch
  %vldl64ip107 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.tail, i32 8, i32 0)
  %vstl64ip108 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.tail, i32 8)
  br label %after.8B.tail

after.8B.tail:                                    ; preds = %handle.8B.tail, %handle.tail.switch
  %src.ptr.after.8B = phi i32 [ %src.ptr.tail, %handle.tail.switch ], [ %vldl64ip107, %handle.8B.tail ]
  %dst.ptr.after.8B = phi i32 [ %dst.ptr.tail, %handle.tail.switch ], [ %vstl64ip108, %handle.8B.tail ]
  %9 = icmp eq i32 %remaining.bytes, 0
  br i1 %9, label %return, label %handle.remaining.bytes

tail.case.1:                                      ; preds = %loop.exit.cleanup
  %vldl64ip23 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip24 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip23, i32 8, i32 0)
  %vst128ip25 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  br label %handle.tail.switch

tail.case.2:                                      ; preds = %loop.exit.cleanup
  %vldl64ip26 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip27 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip26, i32 8, i32 0)
  %vldl64ip28 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip27, i32 8, i32 1)
  %vldh64ip29 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip28, i32 8, i32 1)
  %vst128ip30 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip31 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip30, i32 16)
  br label %handle.tail.switch

tail.case.3:                                      ; preds = %loop.exit.cleanup
  %vldl64ip32 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip33 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip32, i32 8, i32 0)
  %vldl64ip34 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip33, i32 8, i32 1)
  %vldh64ip35 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip34, i32 8, i32 1)
  %vldl64ip36 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip35, i32 8, i32 2)
  %vldh64ip37 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip36, i32 8, i32 2)
  %vst128ip38 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip39 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip38, i32 16)
  %vst128ip40 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip39, i32 16)
  br label %handle.tail.switch

tail.case.4:                                      ; preds = %loop.exit.cleanup
  %vldl64ip41 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip42 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip41, i32 8, i32 0)
  %vldl64ip43 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip42, i32 8, i32 1)
  %vldh64ip44 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip43, i32 8, i32 1)
  %vldl64ip45 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip44, i32 8, i32 2)
  %vldh64ip46 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip45, i32 8, i32 2)
  %vldl64ip47 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip46, i32 8, i32 3)
  %vldh64ip48 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip47, i32 8, i32 3)
  %vst128ip49 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip50 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip49, i32 16)
  %vst128ip51 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip50, i32 16)
  %vst128ip52 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip51, i32 16)
  br label %handle.tail.switch

tail.case.5:                                      ; preds = %loop.exit.cleanup
  %vldl64ip53 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip54 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip53, i32 8, i32 0)
  %vldl64ip55 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip54, i32 8, i32 1)
  %vldh64ip56 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip55, i32 8, i32 1)
  %vldl64ip57 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip56, i32 8, i32 2)
  %vldh64ip58 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip57, i32 8, i32 2)
  %vldl64ip59 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip58, i32 8, i32 3)
  %vldh64ip60 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip59, i32 8, i32 3)
  %vldl64ip61 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip60, i32 8, i32 4)
  %vldh64ip62 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip61, i32 8, i32 4)
  %vst128ip63 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip64 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip63, i32 16)
  %vst128ip65 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip64, i32 16)
  %vst128ip66 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip65, i32 16)
  %vst128ip67 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip66, i32 16)
  br label %handle.tail.switch

tail.case.6:                                      ; preds = %loop.exit.cleanup
  %vldl64ip68 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip69 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip68, i32 8, i32 0)
  %vldl64ip70 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip69, i32 8, i32 1)
  %vldh64ip71 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip70, i32 8, i32 1)
  %vldl64ip72 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip71, i32 8, i32 2)
  %vldh64ip73 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip72, i32 8, i32 2)
  %vldl64ip74 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip73, i32 8, i32 3)
  %vldh64ip75 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip74, i32 8, i32 3)
  %vldl64ip76 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip75, i32 8, i32 4)
  %vldh64ip77 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip76, i32 8, i32 4)
  %vldl64ip78 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip77, i32 8, i32 5)
  %vldh64ip79 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip78, i32 8, i32 5)
  %vst128ip80 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip81 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip80, i32 16)
  %vst128ip82 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip81, i32 16)
  %vst128ip83 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip82, i32 16)
  %vst128ip84 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip83, i32 16)
  %vst128ip85 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip84, i32 16)
  br label %handle.tail.switch

tail.case.7:                                      ; preds = %loop.exit.cleanup
  %vldl64ip86 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip87 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip86, i32 8, i32 0)
  %vldl64ip88 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip87, i32 8, i32 1)
  %vldh64ip89 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip88, i32 8, i32 1)
  %vldl64ip90 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip89, i32 8, i32 2)
  %vldh64ip91 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip90, i32 8, i32 2)
  %vldl64ip92 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip91, i32 8, i32 3)
  %vldh64ip93 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip92, i32 8, i32 3)
  %vldl64ip94 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip93, i32 8, i32 4)
  %vldh64ip95 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip94, i32 8, i32 4)
  %vldl64ip96 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip95, i32 8, i32 5)
  %vldh64ip97 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip96, i32 8, i32 5)
  %vldl64ip98 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip97, i32 8, i32 6)
  %vldh64ip99 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip98, i32 8, i32 6)
  %vst128ip100 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.after.loop, i32 16)
  %vst128ip101 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip100, i32 16)
  %vst128ip102 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip101, i32 16)
  %vst128ip103 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip102, i32 16)
  %vst128ip104 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip103, i32 16)
  %vst128ip105 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip104, i32 16)
  %vst128ip106 = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 %vst128ip105, i32 16)
  br label %handle.tail.switch

handle.remaining.bytes:                           ; preds = %after.8B.tail
  %10 = inttoptr i32 %src.ptr.after.8B to ptr
  %11 = inttoptr i32 %dst.ptr.after.8B to ptr
  call void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr %11, ptr %10, i32 %remaining.bytes)
  br label %return
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc8Dst16From1To7Opt(ptr %dst, ptr %src, i32 %size)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc8Dst16From1To7Opt(
; CHECK-SAME: ptr [[DST:%.*]], ptr [[SRC:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    switch i32 [[SIZE]], label %[[RETURN:.*]] [
; CHECK-NEXT:      i32 1, label %[[SW_BB1:.*]]
; CHECK-NEXT:      i32 2, label %[[SW_BB2:.*]]
; CHECK-NEXT:      i32 3, label %[[SW_BB3:.*]]
; CHECK-NEXT:      i32 4, label %[[SW_BB4:.*]]
; CHECK-NEXT:      i32 5, label %[[SW_BB5:.*]]
; CHECK-NEXT:      i32 6, label %[[SW_BB6:.*]]
; CHECK-NEXT:      i32 7, label %[[SW_BB7:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[SW_BB1]]:
; CHECK-NEXT:    [[SRC_GEP_I8:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I8:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP0:%.*]] = load i8, ptr [[SRC_GEP_I8]], align 1
; CHECK-NEXT:    store i8 [[TMP0]], ptr [[DST_GEP_I8]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB2]]:
; CHECK-NEXT:    [[SRC_GEP_I16:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I16:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP1:%.*]] = load i16, ptr [[SRC_GEP_I16]], align 2
; CHECK-NEXT:    store i16 [[TMP1]], ptr [[DST_GEP_I16]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB3]]:
; CHECK-NEXT:    [[SRC_GEP_I161:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I162:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP2:%.*]] = load i16, ptr [[SRC_GEP_I161]], align 2
; CHECK-NEXT:    store i16 [[TMP2]], ptr [[DST_GEP_I162]], align 2
; CHECK-NEXT:    [[SRC_GEP_I83:%.*]] = getelementptr i8, ptr [[SRC]], i32 2
; CHECK-NEXT:    [[DST_GEP_I84:%.*]] = getelementptr i8, ptr [[DST]], i32 2
; CHECK-NEXT:    [[TMP3:%.*]] = load i8, ptr [[SRC_GEP_I83]], align 1
; CHECK-NEXT:    store i8 [[TMP3]], ptr [[DST_GEP_I84]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB4]]:
; CHECK-NEXT:    [[SRC_GEP_I32:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I32:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr [[SRC_GEP_I32]], align 4
; CHECK-NEXT:    store i32 [[TMP4]], ptr [[DST_GEP_I32]], align 4
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB5]]:
; CHECK-NEXT:    [[SRC_GEP_I325:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I326:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr [[SRC_GEP_I325]], align 4
; CHECK-NEXT:    store i32 [[TMP5]], ptr [[DST_GEP_I326]], align 4
; CHECK-NEXT:    [[SRC_GEP_I87:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I88:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP6:%.*]] = load i8, ptr [[SRC_GEP_I87]], align 1
; CHECK-NEXT:    store i8 [[TMP6]], ptr [[DST_GEP_I88]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB6]]:
; CHECK-NEXT:    [[SRC_GEP_I329:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3210:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP7:%.*]] = load i32, ptr [[SRC_GEP_I329]], align 4
; CHECK-NEXT:    store i32 [[TMP7]], ptr [[DST_GEP_I3210]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1611:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1612:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP8:%.*]] = load i16, ptr [[SRC_GEP_I1611]], align 2
; CHECK-NEXT:    store i16 [[TMP8]], ptr [[DST_GEP_I1612]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB7]]:
; CHECK-NEXT:    [[SRC_GEP_I3213:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3214:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP9:%.*]] = load i32, ptr [[SRC_GEP_I3213]], align 4
; CHECK-NEXT:    store i32 [[TMP9]], ptr [[DST_GEP_I3214]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1615:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1616:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP10:%.*]] = load i16, ptr [[SRC_GEP_I1615]], align 2
; CHECK-NEXT:    store i16 [[TMP10]], ptr [[DST_GEP_I1616]], align 2
; CHECK-NEXT:    [[SRC_GEP_I817:%.*]] = getelementptr i8, ptr [[SRC]], i32 6
; CHECK-NEXT:    [[DST_GEP_I818:%.*]] = getelementptr i8, ptr [[DST]], i32 6
; CHECK-NEXT:    [[TMP11:%.*]] = load i8, ptr [[SRC_GEP_I817]], align 1
; CHECK-NEXT:    store i8 [[TMP11]], ptr [[DST_GEP_I818]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  switch i32 %size, label %return [
  i32 1, label %sw.bb1
  i32 2, label %sw.bb2
  i32 3, label %sw.bb3
  i32 4, label %sw.bb4
  i32 5, label %sw.bb5
  i32 6, label %sw.bb6
  i32 7, label %sw.bb7
  ]

return:                                           ; preds = %sw.bb7, %sw.bb6, %sw.bb5, %sw.bb4, %sw.bb3, %sw.bb2, %sw.bb1, %entry
  ret void

sw.bb1:                                           ; preds = %entry
  %src.gep.i8 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i8 = getelementptr i8, ptr %dst, i32 0
  %0 = load i8, ptr %src.gep.i8, align 1
  store i8 %0, ptr %dst.gep.i8, align 1
  br label %return

sw.bb2:                                           ; preds = %entry
  %src.gep.i16 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i16 = getelementptr i8, ptr %dst, i32 0
  %1 = load i16, ptr %src.gep.i16, align 2
  store i16 %1, ptr %dst.gep.i16, align 2
  br label %return

sw.bb3:                                           ; preds = %entry
  %src.gep.i161 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i162 = getelementptr i8, ptr %dst, i32 0
  %2 = load i16, ptr %src.gep.i161, align 2
  store i16 %2, ptr %dst.gep.i162, align 2
  %src.gep.i83 = getelementptr i8, ptr %src, i32 2
  %dst.gep.i84 = getelementptr i8, ptr %dst, i32 2
  %3 = load i8, ptr %src.gep.i83, align 1
  store i8 %3, ptr %dst.gep.i84, align 1
  br label %return

sw.bb4:                                           ; preds = %entry
  %src.gep.i32 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i32 = getelementptr i8, ptr %dst, i32 0
  %4 = load i32, ptr %src.gep.i32, align 4
  store i32 %4, ptr %dst.gep.i32, align 4
  br label %return

sw.bb5:                                           ; preds = %entry
  %src.gep.i325 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i326 = getelementptr i8, ptr %dst, i32 0
  %5 = load i32, ptr %src.gep.i325, align 4
  store i32 %5, ptr %dst.gep.i326, align 4
  %src.gep.i87 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i88 = getelementptr i8, ptr %dst, i32 4
  %6 = load i8, ptr %src.gep.i87, align 1
  store i8 %6, ptr %dst.gep.i88, align 1
  br label %return

sw.bb6:                                           ; preds = %entry
  %src.gep.i329 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3210 = getelementptr i8, ptr %dst, i32 0
  %7 = load i32, ptr %src.gep.i329, align 4
  store i32 %7, ptr %dst.gep.i3210, align 4
  %src.gep.i1611 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1612 = getelementptr i8, ptr %dst, i32 4
  %8 = load i16, ptr %src.gep.i1611, align 2
  store i16 %8, ptr %dst.gep.i1612, align 2
  br label %return

sw.bb7:                                           ; preds = %entry
  %src.gep.i3213 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3214 = getelementptr i8, ptr %dst, i32 0
  %9 = load i32, ptr %src.gep.i3213, align 4
  store i32 %9, ptr %dst.gep.i3214, align 4
  %src.gep.i1615 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1616 = getelementptr i8, ptr %dst, i32 4
  %10 = load i16, ptr %src.gep.i1615, align 2
  store i16 %10, ptr %dst.gep.i1616, align 2
  %src.gep.i817 = getelementptr i8, ptr %src, i32 6
  %dst.gep.i818 = getelementptr i8, ptr %dst, i32 6
  %11 = load i8, ptr %src.gep.i817, align 1
  store i8 %11, ptr %dst.gep.i818, align 1
  br label %return
}

; Function Attrs: nounwind
declare i32 @llvm.riscv.esp.vld.h.64.ip(i32, i32 immarg, i32 immarg) #13

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc8Dst8Var(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc8Dst8Var(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    [[CMP:%.*]] = icmp ult i32 [[TMP2]], 8
; CHECK-NEXT:    br i1 [[CMP]], label %[[HANDLE_SMALL_SIZE:.*]], label %[[CHECK_MID_RANGE:.*]]
; CHECK:       [[HANDLE_SMALL_SIZE]]:
; CHECK-NEXT:    [[TMP3:%.*]] = inttoptr i32 [[TMP0]] to ptr
; CHECK-NEXT:    [[TMP4:%.*]] = inttoptr i32 [[TMP1]] to ptr
; CHECK-NEXT:    tail call void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr [[TMP3]], ptr [[TMP4]], i32 [[TMP2]])
; CHECK-NEXT:    br label %[[RETURN:.*]]
; CHECK:       [[CHECK_MID_RANGE]]:
; CHECK-NEXT:    [[CMP1:%.*]] = icmp ult i32 [[TMP2]], 16
; CHECK-NEXT:    br i1 [[CMP1]], label %[[HANDLE_MID_SIZE:.*]], label %[[HANDLE_LARGE_LOOP:.*]]
; CHECK:       [[HANDLE_MID_SIZE]]:
; CHECK-NEXT:    [[VLDL64IP:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[TMP1]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[TMP0]], i32 8)
; CHECK-NEXT:    [[TMP5:%.*]] = inttoptr i32 [[VSTL64IP]] to ptr
; CHECK-NEXT:    [[TMP6:%.*]] = inttoptr i32 [[VLDL64IP]] to ptr
; CHECK-NEXT:    [[SUB:%.*]] = add nsw i32 [[TMP2]], -8
; CHECK-NEXT:    call void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr [[TMP5]], ptr [[TMP6]], i32 [[SUB]])
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[HANDLE_LARGE_LOOP]]:
; CHECK-NEXT:    [[DIV94:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[REM:%.*]] = lshr i32 [[TMP2]], 4
; CHECK-NEXT:    [[DIV195:%.*]] = and i32 [[REM]], 7
; CHECK-NEXT:    [[REM4:%.*]] = and i32 [[TMP2]], 7
; CHECK-NEXT:    [[CMP97_NOT:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[CMP97_NOT]], label %[[LOOP_EXIT_CLEANUP:.*]], label %[[LOOP_BODY_128B:.*]]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[LOOP_EXIT_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLDH64IP15:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_AT_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VSTH64IP30:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    switch i32 [[DIV195]], label %[[INVALID_SWITCH_TRAP:.*]] [
; CHECK-NEXT:      i32 1, label %[[TAIL_CASE_1:.*]]
; CHECK-NEXT:      i32 2, label %[[TAIL_CASE_2:.*]]
; CHECK-NEXT:      i32 3, label %[[TAIL_CASE_3:.*]]
; CHECK-NEXT:      i32 4, label %[[TAIL_CASE_4:.*]]
; CHECK-NEXT:      i32 5, label %[[TAIL_CASE_5:.*]]
; CHECK-NEXT:      i32 6, label %[[TAIL_CASE_6:.*]]
; CHECK-NEXT:      i32 7, label %[[TAIL_CASE_7:.*]]
; CHECK-NEXT:      i32 0, label %[[HANDLE_TAIL_SWITCH:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[LOOP_BODY_128B]]:
; CHECK-NEXT:    [[I_098:%.*]] = phi i32 [ 0, %[[HANDLE_LARGE_LOOP]] ], [ [[INC:%.*]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[SRC_PTR_PHI:%.*]] = phi i32 [ [[TMP1]], %[[HANDLE_LARGE_LOOP]] ], [ [[VLDH64IP15]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[DST_PTR_PHI:%.*]] = phi i32 [ [[TMP0]], %[[HANDLE_LARGE_LOOP]] ], [ [[VSTH64IP30]], %[[LOOP_BODY_128B]] ]
; CHECK-NEXT:    [[VLDL64IP1:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_PHI]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP1]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP2:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP3:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP2]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP4:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP3]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP5:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP4]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP6:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP5]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP7:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP6]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP8:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP7]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP9:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP8]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP10:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP9]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP11:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP10]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDL64IP12:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP11]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDH64IP13:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP12]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDL64IP14:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP13]], i32 8, i32 7)
; CHECK-NEXT:    [[VLDH64IP15]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP14]], i32 8, i32 7)
; CHECK-NEXT:    [[VSTL64IP16:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_PHI]], i32 8)
; CHECK-NEXT:    [[VSTH64IP:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP16]], i32 8)
; CHECK-NEXT:    [[VSTL64IP17:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP18:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP17]], i32 8)
; CHECK-NEXT:    [[VSTL64IP19:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP18]], i32 8)
; CHECK-NEXT:    [[VSTH64IP20:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP19]], i32 8)
; CHECK-NEXT:    [[VSTL64IP21:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP20]], i32 8)
; CHECK-NEXT:    [[VSTH64IP22:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP21]], i32 8)
; CHECK-NEXT:    [[VSTL64IP23:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP22]], i32 8)
; CHECK-NEXT:    [[VSTH64IP24:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP23]], i32 8)
; CHECK-NEXT:    [[VSTL64IP25:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP24]], i32 8)
; CHECK-NEXT:    [[VSTH64IP26:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP25]], i32 8)
; CHECK-NEXT:    [[VSTL64IP27:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 [[VSTH64IP26]], i32 8)
; CHECK-NEXT:    [[VSTH64IP28:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 [[VSTL64IP27]], i32 8)
; CHECK-NEXT:    [[VSTL64IP29:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 [[VSTH64IP28]], i32 8)
; CHECK-NEXT:    [[VSTH64IP30]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 [[VSTL64IP29]], i32 8)
; CHECK-NEXT:    [[INC]] = add nuw nsw i32 [[I_098]], 1
; CHECK-NEXT:    [[EXITCOND_NOT:%.*]] = icmp eq i32 [[INC]], [[DIV94]]
; CHECK-NEXT:    br i1 [[EXITCOND_NOT]], label %[[LOOP_EXIT_CLEANUP]], label %[[LOOP_BODY_128B]]
; CHECK:       [[HANDLE_TAIL_SWITCH]]:
; CHECK-NEXT:    [[SRC_PTR_EPILOG:%.*]] = phi i32 [ [[SRC_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VLDH64IP32:%.*]], %[[TAIL_CASE_1]] ], [ [[VLDH64IP38:%.*]], %[[TAIL_CASE_2]] ], [ [[VLDH64IP48:%.*]], %[[TAIL_CASE_3]] ], [ [[VLDH64IP62:%.*]], %[[TAIL_CASE_4]] ], [ [[VLDH64IP80:%.*]], %[[TAIL_CASE_5]] ], [ [[VLDH64IP102:%.*]], %[[TAIL_CASE_6]] ], [ [[VLDH64IP128:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[DST_PTR_EPILOG:%.*]] = phi i32 [ [[DST_PTR_AT_CLEANUP]], %[[LOOP_EXIT_CLEANUP]] ], [ [[VSTH64IP34:%.*]], %[[TAIL_CASE_1]] ], [ [[VSTH64IP42:%.*]], %[[TAIL_CASE_2]] ], [ [[VSTH64IP54:%.*]], %[[TAIL_CASE_3]] ], [ [[VSTH64IP70:%.*]], %[[TAIL_CASE_4]] ], [ [[VSTH64IP90:%.*]], %[[TAIL_CASE_5]] ], [ [[VSTH64IP114:%.*]], %[[TAIL_CASE_6]] ], [ [[VSTH64IP142:%.*]], %[[TAIL_CASE_7]] ]
; CHECK-NEXT:    [[TMP7:%.*]] = and i32 [[TMP2]], 8
; CHECK-NEXT:    [[TMP8:%.*]] = icmp eq i32 [[TMP7]], 0
; CHECK-NEXT:    br i1 [[TMP8]], label %[[AFTER_8B_TAIL:.*]], label %[[HANDLE_8B_TAIL:.*]]
; CHECK:       [[INVALID_SWITCH_TRAP]]:
; CHECK-NEXT:    unreachable
; CHECK:       [[HANDLE_8B_TAIL]]:
; CHECK-NEXT:    [[VLDL64IP143:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_EPILOG]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP144:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_EPILOG]], i32 8)
; CHECK-NEXT:    br label %[[AFTER_8B_TAIL]]
; CHECK:       [[AFTER_8B_TAIL]]:
; CHECK-NEXT:    [[SRC_PTR_END17:%.*]] = phi i32 [ [[SRC_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VLDL64IP143]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[DST_PTR_END17:%.*]] = phi i32 [ [[DST_PTR_EPILOG]], %[[HANDLE_TAIL_SWITCH]] ], [ [[VSTL64IP144]], %[[HANDLE_8B_TAIL]] ]
; CHECK-NEXT:    [[TMP9:%.*]] = icmp eq i32 [[REM4]], 0
; CHECK-NEXT:    br i1 [[TMP9]], label %[[RETURN]], label %[[HANDLE_REMAINING_BYTES:.*]]
; CHECK:       [[TAIL_CASE_1]]:
; CHECK-NEXT:    [[VLDL64IP31:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP32]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP31]], i32 8, i32 0)
; CHECK-NEXT:    [[VSTL64IP33:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP34]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP33]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_2]]:
; CHECK-NEXT:    [[VLDL64IP35:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP36:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP35]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP37:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP36]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP38]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP37]], i32 8, i32 1)
; CHECK-NEXT:    [[VSTL64IP39:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP40:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP39]], i32 8)
; CHECK-NEXT:    [[VSTL64IP41:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP40]], i32 8)
; CHECK-NEXT:    [[VSTH64IP42]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP41]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_3]]:
; CHECK-NEXT:    [[VLDL64IP43:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP44:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP43]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP45:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP44]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP46:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP45]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP47:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP46]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP48]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP47]], i32 8, i32 2)
; CHECK-NEXT:    [[VSTL64IP49:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP50:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP49]], i32 8)
; CHECK-NEXT:    [[VSTL64IP51:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP50]], i32 8)
; CHECK-NEXT:    [[VSTH64IP52:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP51]], i32 8)
; CHECK-NEXT:    [[VSTL64IP53:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP52]], i32 8)
; CHECK-NEXT:    [[VSTH64IP54]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP53]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_4]]:
; CHECK-NEXT:    [[VLDL64IP55:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP56:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP55]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP57:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP56]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP58:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP57]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP59:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP58]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP60:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP59]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP61:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP60]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP62]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP61]], i32 8, i32 3)
; CHECK-NEXT:    [[VSTL64IP63:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP64:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP63]], i32 8)
; CHECK-NEXT:    [[VSTL64IP65:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP64]], i32 8)
; CHECK-NEXT:    [[VSTH64IP66:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP65]], i32 8)
; CHECK-NEXT:    [[VSTL64IP67:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP66]], i32 8)
; CHECK-NEXT:    [[VSTH64IP68:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP67]], i32 8)
; CHECK-NEXT:    [[VSTL64IP69:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP68]], i32 8)
; CHECK-NEXT:    [[VSTH64IP70]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP69]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_5]]:
; CHECK-NEXT:    [[VLDL64IP71:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP72:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP71]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP73:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP72]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP74:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP73]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP75:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP74]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP76:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP75]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP77:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP76]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP78:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP77]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP79:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP78]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP80]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP79]], i32 8, i32 4)
; CHECK-NEXT:    [[VSTL64IP81:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP82:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP81]], i32 8)
; CHECK-NEXT:    [[VSTL64IP83:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP82]], i32 8)
; CHECK-NEXT:    [[VSTH64IP84:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP83]], i32 8)
; CHECK-NEXT:    [[VSTL64IP85:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP84]], i32 8)
; CHECK-NEXT:    [[VSTH64IP86:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP85]], i32 8)
; CHECK-NEXT:    [[VSTL64IP87:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP86]], i32 8)
; CHECK-NEXT:    [[VSTH64IP88:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP87]], i32 8)
; CHECK-NEXT:    [[VSTL64IP89:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP88]], i32 8)
; CHECK-NEXT:    [[VSTH64IP90]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP89]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_6]]:
; CHECK-NEXT:    [[VLDL64IP91:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP92:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP91]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP93:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP92]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP94:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP93]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP95:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP94]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP96:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP95]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP97:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP96]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP98:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP97]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP99:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP98]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP100:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP99]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP101:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP100]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP102]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP101]], i32 8, i32 5)
; CHECK-NEXT:    [[VSTL64IP103:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP104:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP103]], i32 8)
; CHECK-NEXT:    [[VSTL64IP105:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP104]], i32 8)
; CHECK-NEXT:    [[VSTH64IP106:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP105]], i32 8)
; CHECK-NEXT:    [[VSTL64IP107:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP106]], i32 8)
; CHECK-NEXT:    [[VSTH64IP108:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP107]], i32 8)
; CHECK-NEXT:    [[VSTL64IP109:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP108]], i32 8)
; CHECK-NEXT:    [[VSTH64IP110:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP109]], i32 8)
; CHECK-NEXT:    [[VSTL64IP111:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP110]], i32 8)
; CHECK-NEXT:    [[VSTH64IP112:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP111]], i32 8)
; CHECK-NEXT:    [[VSTL64IP113:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP112]], i32 8)
; CHECK-NEXT:    [[VSTH64IP114]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP113]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[TAIL_CASE_7]]:
; CHECK-NEXT:    [[VLDL64IP115:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_AT_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP116:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP115]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP117:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP116]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP118:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP117]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP119:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP118]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP120:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP119]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP121:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP120]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP122:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP121]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP123:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP122]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP124:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP123]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP125:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP124]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP126:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP125]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDL64IP127:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP126]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDH64IP128]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP127]], i32 8, i32 6)
; CHECK-NEXT:    [[VSTL64IP129:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_AT_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP130:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP129]], i32 8)
; CHECK-NEXT:    [[VSTL64IP131:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP130]], i32 8)
; CHECK-NEXT:    [[VSTH64IP132:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP131]], i32 8)
; CHECK-NEXT:    [[VSTL64IP133:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP132]], i32 8)
; CHECK-NEXT:    [[VSTH64IP134:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP133]], i32 8)
; CHECK-NEXT:    [[VSTL64IP135:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP134]], i32 8)
; CHECK-NEXT:    [[VSTH64IP136:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP135]], i32 8)
; CHECK-NEXT:    [[VSTL64IP137:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP136]], i32 8)
; CHECK-NEXT:    [[VSTH64IP138:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP137]], i32 8)
; CHECK-NEXT:    [[VSTL64IP139:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP138]], i32 8)
; CHECK-NEXT:    [[VSTH64IP140:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP139]], i32 8)
; CHECK-NEXT:    [[VSTL64IP141:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 [[VSTH64IP140]], i32 8)
; CHECK-NEXT:    [[VSTH64IP142]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 [[VSTL64IP141]], i32 8)
; CHECK-NEXT:    br label %[[HANDLE_TAIL_SWITCH]]
; CHECK:       [[HANDLE_REMAINING_BYTES]]:
; CHECK-NEXT:    [[TMP10:%.*]] = inttoptr i32 [[SRC_PTR_END17]] to ptr
; CHECK-NEXT:    [[TMP11:%.*]] = inttoptr i32 [[DST_PTR_END17]] to ptr
; CHECK-NEXT:    call void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr [[TMP11]], ptr [[TMP10]], i32 [[REM4]])
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  %is.lt.8 = icmp ult i32 %2, 8
  br i1 %is.lt.8, label %handle.small.size, label %check.mid.range

handle.small.size:                                ; preds = %entry
  %3 = inttoptr i32 %0 to ptr
  %4 = inttoptr i32 %1 to ptr
  tail call void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr %3, ptr %4, i32 %2)
  br label %return

check.mid.range:                                  ; preds = %entry
  %is.lt.16 = icmp ult i32 %2, 16
  br i1 %is.lt.16, label %handle.mid.size, label %handle.large.loop

handle.mid.size:                                  ; preds = %check.mid.range
  %vldl64ip = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %1, i32 8, i32 0)
  %vstl64ip = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %0, i32 8)
  %5 = inttoptr i32 %vstl64ip to ptr
  %6 = inttoptr i32 %vldl64ip to ptr
  %size.minus.8 = add nsw i32 %2, -8
  call void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr %5, ptr %6, i32 %size.minus.8)
  br label %return

handle.large.loop:                                ; preds = %check.mid.range
  %num.128B.blocks = lshr i32 %2, 7
  %num.16B.blocks = lshr i32 %2, 4
  %remaining.16B.blocks = and i32 %num.16B.blocks, 7
  %remaining.bytes = and i32 %2, 7
  %is.lt.128 = icmp ult i32 %2, 128
  br i1 %is.lt.128, label %loop.exit.cleanup, label %loop.body.128B

return:                                           ; preds = %handle.remaining.bytes, %after.8B.tail, %handle.mid.size, %handle.small.size
  ret void

loop.exit.cleanup:                                ; preds = %loop.body.128B, %handle.large.loop
  %src.ptr.after.loop = phi i32 [ %1, %handle.large.loop ], [ %vldh64ip15, %loop.body.128B ]
  %dst.ptr.after.loop = phi i32 [ %0, %handle.large.loop ], [ %vsth64ip30, %loop.body.128B ]
  switch i32 %remaining.16B.blocks, label %invalid.switch.trap [
  i32 1, label %tail.case.1
  i32 2, label %tail.case.2
  i32 3, label %tail.case.3
  i32 4, label %tail.case.4
  i32 5, label %tail.case.5
  i32 6, label %tail.case.6
  i32 7, label %tail.case.7
  i32 0, label %handle.tail.switch
  ]

loop.body.128B:                                   ; preds = %loop.body.128B, %handle.large.loop
  %loop.index = phi i32 [ 0, %handle.large.loop ], [ %loop.inc, %loop.body.128B ]
  %src.ptr.loop = phi i32 [ %1, %handle.large.loop ], [ %vldh64ip15, %loop.body.128B ]
  %dst.ptr.loop = phi i32 [ %0, %handle.large.loop ], [ %vsth64ip30, %loop.body.128B ]
  %vldl64ip1 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.loop, i32 8, i32 0)
  %vldh64ip = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip1, i32 8, i32 0)
  %vldl64ip2 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip, i32 8, i32 1)
  %vldh64ip3 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip2, i32 8, i32 1)
  %vldl64ip4 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip3, i32 8, i32 2)
  %vldh64ip5 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip4, i32 8, i32 2)
  %vldl64ip6 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip5, i32 8, i32 3)
  %vldh64ip7 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip6, i32 8, i32 3)
  %vldl64ip8 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip7, i32 8, i32 4)
  %vldh64ip9 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip8, i32 8, i32 4)
  %vldl64ip10 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip9, i32 8, i32 5)
  %vldh64ip11 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip10, i32 8, i32 5)
  %vldl64ip12 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip11, i32 8, i32 6)
  %vldh64ip13 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip12, i32 8, i32 6)
  %vldl64ip14 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip13, i32 8, i32 7)
  %vldh64ip15 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip14, i32 8, i32 7)
  %vstl64ip16 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.loop, i32 8)
  %vsth64ip = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip16, i32 8)
  %vstl64ip17 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip, i32 8)
  %vsth64ip18 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip17, i32 8)
  %vstl64ip19 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip18, i32 8)
  %vsth64ip20 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip19, i32 8)
  %vstl64ip21 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip20, i32 8)
  %vsth64ip22 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip21, i32 8)
  %vstl64ip23 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip22, i32 8)
  %vsth64ip24 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip23, i32 8)
  %vstl64ip25 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip24, i32 8)
  %vsth64ip26 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip25, i32 8)
  %vstl64ip27 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 %vsth64ip26, i32 8)
  %vsth64ip28 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 %vstl64ip27, i32 8)
  %vstl64ip29 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 %vsth64ip28, i32 8)
  %vsth64ip30 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 %vstl64ip29, i32 8)
  %loop.inc = add nuw nsw i32 %loop.index, 1
  %loop.done = icmp eq i32 %loop.inc, %num.128B.blocks
  br i1 %loop.done, label %loop.exit.cleanup, label %loop.body.128B

handle.tail.switch:                               ; preds = %loop.exit.cleanup, %tail.case.7, %tail.case.6, %tail.case.5, %tail.case.4, %tail.case.3, %tail.case.2, %tail.case.1
  %src.ptr.tail = phi i32 [ %src.ptr.after.loop, %loop.exit.cleanup ], [ %vldh64ip32, %tail.case.1 ], [ %vldh64ip38, %tail.case.2 ], [ %vldh64ip48, %tail.case.3 ], [ %vldh64ip62, %tail.case.4 ], [ %vldh64ip80, %tail.case.5 ], [ %vldh64ip102, %tail.case.6 ], [ %vldh64ip128, %tail.case.7 ]
  %dst.ptr.tail = phi i32 [ %dst.ptr.after.loop, %loop.exit.cleanup ], [ %vsth64ip34, %tail.case.1 ], [ %vsth64ip42, %tail.case.2 ], [ %vsth64ip54, %tail.case.3 ], [ %vsth64ip70, %tail.case.4 ], [ %vsth64ip90, %tail.case.5 ], [ %vsth64ip114, %tail.case.6 ], [ %vsth64ip142, %tail.case.7 ]
  %7 = and i32 %2, 8
  %8 = icmp eq i32 %7, 0
  br i1 %8, label %after.8B.tail, label %handle.8B.tail

invalid.switch.trap:                              ; preds = %loop.exit.cleanup
  unreachable

handle.8B.tail:                                   ; preds = %handle.tail.switch
  %vldl64ip143 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.tail, i32 8, i32 0)
  %vstl64ip144 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.tail, i32 8)
  br label %after.8B.tail

after.8B.tail:                                    ; preds = %handle.8B.tail, %handle.tail.switch
  %src.ptr.after.8B = phi i32 [ %src.ptr.tail, %handle.tail.switch ], [ %vldl64ip143, %handle.8B.tail ]
  %dst.ptr.after.8B = phi i32 [ %dst.ptr.tail, %handle.tail.switch ], [ %vstl64ip144, %handle.8B.tail ]
  %9 = icmp eq i32 %remaining.bytes, 0
  br i1 %9, label %return, label %handle.remaining.bytes

tail.case.1:                                      ; preds = %loop.exit.cleanup
  %vldl64ip31 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip32 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip31, i32 8, i32 0)
  %vstl64ip33 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip34 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip33, i32 8)
  br label %handle.tail.switch

tail.case.2:                                      ; preds = %loop.exit.cleanup
  %vldl64ip35 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip36 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip35, i32 8, i32 0)
  %vldl64ip37 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip36, i32 8, i32 1)
  %vldh64ip38 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip37, i32 8, i32 1)
  %vstl64ip39 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip40 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip39, i32 8)
  %vstl64ip41 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip40, i32 8)
  %vsth64ip42 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip41, i32 8)
  br label %handle.tail.switch

tail.case.3:                                      ; preds = %loop.exit.cleanup
  %vldl64ip43 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip44 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip43, i32 8, i32 0)
  %vldl64ip45 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip44, i32 8, i32 1)
  %vldh64ip46 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip45, i32 8, i32 1)
  %vldl64ip47 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip46, i32 8, i32 2)
  %vldh64ip48 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip47, i32 8, i32 2)
  %vstl64ip49 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip50 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip49, i32 8)
  %vstl64ip51 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip50, i32 8)
  %vsth64ip52 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip51, i32 8)
  %vstl64ip53 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip52, i32 8)
  %vsth64ip54 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip53, i32 8)
  br label %handle.tail.switch

tail.case.4:                                      ; preds = %loop.exit.cleanup
  %vldl64ip55 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip56 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip55, i32 8, i32 0)
  %vldl64ip57 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip56, i32 8, i32 1)
  %vldh64ip58 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip57, i32 8, i32 1)
  %vldl64ip59 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip58, i32 8, i32 2)
  %vldh64ip60 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip59, i32 8, i32 2)
  %vldl64ip61 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip60, i32 8, i32 3)
  %vldh64ip62 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip61, i32 8, i32 3)
  %vstl64ip63 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip64 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip63, i32 8)
  %vstl64ip65 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip64, i32 8)
  %vsth64ip66 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip65, i32 8)
  %vstl64ip67 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip66, i32 8)
  %vsth64ip68 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip67, i32 8)
  %vstl64ip69 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip68, i32 8)
  %vsth64ip70 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip69, i32 8)
  br label %handle.tail.switch

tail.case.5:                                      ; preds = %loop.exit.cleanup
  %vldl64ip71 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip72 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip71, i32 8, i32 0)
  %vldl64ip73 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip72, i32 8, i32 1)
  %vldh64ip74 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip73, i32 8, i32 1)
  %vldl64ip75 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip74, i32 8, i32 2)
  %vldh64ip76 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip75, i32 8, i32 2)
  %vldl64ip77 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip76, i32 8, i32 3)
  %vldh64ip78 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip77, i32 8, i32 3)
  %vldl64ip79 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip78, i32 8, i32 4)
  %vldh64ip80 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip79, i32 8, i32 4)
  %vstl64ip81 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip82 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip81, i32 8)
  %vstl64ip83 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip82, i32 8)
  %vsth64ip84 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip83, i32 8)
  %vstl64ip85 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip84, i32 8)
  %vsth64ip86 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip85, i32 8)
  %vstl64ip87 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip86, i32 8)
  %vsth64ip88 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip87, i32 8)
  %vstl64ip89 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip88, i32 8)
  %vsth64ip90 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip89, i32 8)
  br label %handle.tail.switch

tail.case.6:                                      ; preds = %loop.exit.cleanup
  %vldl64ip91 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip92 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip91, i32 8, i32 0)
  %vldl64ip93 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip92, i32 8, i32 1)
  %vldh64ip94 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip93, i32 8, i32 1)
  %vldl64ip95 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip94, i32 8, i32 2)
  %vldh64ip96 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip95, i32 8, i32 2)
  %vldl64ip97 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip96, i32 8, i32 3)
  %vldh64ip98 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip97, i32 8, i32 3)
  %vldl64ip99 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip98, i32 8, i32 4)
  %vldh64ip100 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip99, i32 8, i32 4)
  %vldl64ip101 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip100, i32 8, i32 5)
  %vldh64ip102 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip101, i32 8, i32 5)
  %vstl64ip103 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip104 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip103, i32 8)
  %vstl64ip105 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip104, i32 8)
  %vsth64ip106 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip105, i32 8)
  %vstl64ip107 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip106, i32 8)
  %vsth64ip108 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip107, i32 8)
  %vstl64ip109 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip108, i32 8)
  %vsth64ip110 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip109, i32 8)
  %vstl64ip111 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip110, i32 8)
  %vsth64ip112 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip111, i32 8)
  %vstl64ip113 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip112, i32 8)
  %vsth64ip114 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip113, i32 8)
  br label %handle.tail.switch

tail.case.7:                                      ; preds = %loop.exit.cleanup
  %vldl64ip115 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.after.loop, i32 8, i32 0)
  %vldh64ip116 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip115, i32 8, i32 0)
  %vldl64ip117 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip116, i32 8, i32 1)
  %vldh64ip118 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip117, i32 8, i32 1)
  %vldl64ip119 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip118, i32 8, i32 2)
  %vldh64ip120 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip119, i32 8, i32 2)
  %vldl64ip121 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip120, i32 8, i32 3)
  %vldh64ip122 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip121, i32 8, i32 3)
  %vldl64ip123 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip122, i32 8, i32 4)
  %vldh64ip124 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip123, i32 8, i32 4)
  %vldl64ip125 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip124, i32 8, i32 5)
  %vldh64ip126 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip125, i32 8, i32 5)
  %vldl64ip127 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip126, i32 8, i32 6)
  %vldh64ip128 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip127, i32 8, i32 6)
  %vstl64ip129 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.after.loop, i32 8)
  %vsth64ip130 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip129, i32 8)
  %vstl64ip131 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip130, i32 8)
  %vsth64ip132 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip131, i32 8)
  %vstl64ip133 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip132, i32 8)
  %vsth64ip134 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip133, i32 8)
  %vstl64ip135 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip134, i32 8)
  %vsth64ip136 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip135, i32 8)
  %vstl64ip137 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip136, i32 8)
  %vsth64ip138 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip137, i32 8)
  %vstl64ip139 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip138, i32 8)
  %vsth64ip140 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip139, i32 8)
  %vstl64ip141 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 %vsth64ip140, i32 8)
  %vsth64ip142 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 %vstl64ip141, i32 8)
  br label %handle.tail.switch

handle.remaining.bytes:                           ; preds = %after.8B.tail
  %10 = inttoptr i32 %src.ptr.after.8B to ptr
  %11 = inttoptr i32 %dst.ptr.after.8B to ptr
  call void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr %11, ptr %10, i32 %remaining.bytes)
  br label %return
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc8Dst8From1To7Opt(ptr %dst, ptr %src, i32 %size)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc8Dst8From1To7Opt(
; CHECK-SAME: ptr [[DST:%.*]], ptr [[SRC:%.*]], i32 [[SIZE:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    switch i32 [[SIZE]], label %[[RETURN:.*]] [
; CHECK-NEXT:      i32 1, label %[[SW_BB1:.*]]
; CHECK-NEXT:      i32 2, label %[[SW_BB2:.*]]
; CHECK-NEXT:      i32 3, label %[[SW_BB3:.*]]
; CHECK-NEXT:      i32 4, label %[[SW_BB4:.*]]
; CHECK-NEXT:      i32 5, label %[[SW_BB5:.*]]
; CHECK-NEXT:      i32 6, label %[[SW_BB6:.*]]
; CHECK-NEXT:      i32 7, label %[[SW_BB7:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[RETURN]]:
; CHECK-NEXT:    ret void
; CHECK:       [[SW_BB1]]:
; CHECK-NEXT:    [[SRC_GEP_I8:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I8:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP0:%.*]] = load i8, ptr [[SRC_GEP_I8]], align 1
; CHECK-NEXT:    store i8 [[TMP0]], ptr [[DST_GEP_I8]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB2]]:
; CHECK-NEXT:    [[SRC_GEP_I16:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I16:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP1:%.*]] = load i16, ptr [[SRC_GEP_I16]], align 2
; CHECK-NEXT:    store i16 [[TMP1]], ptr [[DST_GEP_I16]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB3]]:
; CHECK-NEXT:    [[SRC_GEP_I161:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I162:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP2:%.*]] = load i16, ptr [[SRC_GEP_I161]], align 2
; CHECK-NEXT:    store i16 [[TMP2]], ptr [[DST_GEP_I162]], align 2
; CHECK-NEXT:    [[SRC_GEP_I83:%.*]] = getelementptr i8, ptr [[SRC]], i32 2
; CHECK-NEXT:    [[DST_GEP_I84:%.*]] = getelementptr i8, ptr [[DST]], i32 2
; CHECK-NEXT:    [[TMP3:%.*]] = load i8, ptr [[SRC_GEP_I83]], align 1
; CHECK-NEXT:    store i8 [[TMP3]], ptr [[DST_GEP_I84]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB4]]:
; CHECK-NEXT:    [[SRC_GEP_I32:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I32:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr [[SRC_GEP_I32]], align 4
; CHECK-NEXT:    store i32 [[TMP4]], ptr [[DST_GEP_I32]], align 4
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB5]]:
; CHECK-NEXT:    [[SRC_GEP_I325:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I326:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr [[SRC_GEP_I325]], align 4
; CHECK-NEXT:    store i32 [[TMP5]], ptr [[DST_GEP_I326]], align 4
; CHECK-NEXT:    [[SRC_GEP_I87:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I88:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP6:%.*]] = load i8, ptr [[SRC_GEP_I87]], align 1
; CHECK-NEXT:    store i8 [[TMP6]], ptr [[DST_GEP_I88]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB6]]:
; CHECK-NEXT:    [[SRC_GEP_I329:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3210:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP7:%.*]] = load i32, ptr [[SRC_GEP_I329]], align 4
; CHECK-NEXT:    store i32 [[TMP7]], ptr [[DST_GEP_I3210]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1611:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1612:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP8:%.*]] = load i16, ptr [[SRC_GEP_I1611]], align 2
; CHECK-NEXT:    store i16 [[TMP8]], ptr [[DST_GEP_I1612]], align 2
; CHECK-NEXT:    br label %[[RETURN]]
; CHECK:       [[SW_BB7]]:
; CHECK-NEXT:    [[SRC_GEP_I3213:%.*]] = getelementptr i8, ptr [[SRC]], i32 0
; CHECK-NEXT:    [[DST_GEP_I3214:%.*]] = getelementptr i8, ptr [[DST]], i32 0
; CHECK-NEXT:    [[TMP9:%.*]] = load i32, ptr [[SRC_GEP_I3213]], align 4
; CHECK-NEXT:    store i32 [[TMP9]], ptr [[DST_GEP_I3214]], align 4
; CHECK-NEXT:    [[SRC_GEP_I1615:%.*]] = getelementptr i8, ptr [[SRC]], i32 4
; CHECK-NEXT:    [[DST_GEP_I1616:%.*]] = getelementptr i8, ptr [[DST]], i32 4
; CHECK-NEXT:    [[TMP10:%.*]] = load i16, ptr [[SRC_GEP_I1615]], align 2
; CHECK-NEXT:    store i16 [[TMP10]], ptr [[DST_GEP_I1616]], align 2
; CHECK-NEXT:    [[SRC_GEP_I817:%.*]] = getelementptr i8, ptr [[SRC]], i32 6
; CHECK-NEXT:    [[DST_GEP_I818:%.*]] = getelementptr i8, ptr [[DST]], i32 6
; CHECK-NEXT:    [[TMP11:%.*]] = load i8, ptr [[SRC_GEP_I817]], align 1
; CHECK-NEXT:    store i8 [[TMP11]], ptr [[DST_GEP_I818]], align 1
; CHECK-NEXT:    br label %[[RETURN]]
;
entry:
  switch i32 %size, label %return [
  i32 1, label %sw.bb1
  i32 2, label %sw.bb2
  i32 3, label %sw.bb3
  i32 4, label %sw.bb4
  i32 5, label %sw.bb5
  i32 6, label %sw.bb6
  i32 7, label %sw.bb7
  ]

return:                                           ; preds = %sw.bb7, %sw.bb6, %sw.bb5, %sw.bb4, %sw.bb3, %sw.bb2, %sw.bb1, %entry
  ret void

sw.bb1:                                           ; preds = %entry
  %src.gep.i8 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i8 = getelementptr i8, ptr %dst, i32 0
  %0 = load i8, ptr %src.gep.i8, align 1
  store i8 %0, ptr %dst.gep.i8, align 1
  br label %return

sw.bb2:                                           ; preds = %entry
  %src.gep.i16 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i16 = getelementptr i8, ptr %dst, i32 0
  %1 = load i16, ptr %src.gep.i16, align 2
  store i16 %1, ptr %dst.gep.i16, align 2
  br label %return

sw.bb3:                                           ; preds = %entry
  %src.gep.i161 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i162 = getelementptr i8, ptr %dst, i32 0
  %2 = load i16, ptr %src.gep.i161, align 2
  store i16 %2, ptr %dst.gep.i162, align 2
  %src.gep.i83 = getelementptr i8, ptr %src, i32 2
  %dst.gep.i84 = getelementptr i8, ptr %dst, i32 2
  %3 = load i8, ptr %src.gep.i83, align 1
  store i8 %3, ptr %dst.gep.i84, align 1
  br label %return

sw.bb4:                                           ; preds = %entry
  %src.gep.i32 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i32 = getelementptr i8, ptr %dst, i32 0
  %4 = load i32, ptr %src.gep.i32, align 4
  store i32 %4, ptr %dst.gep.i32, align 4
  br label %return

sw.bb5:                                           ; preds = %entry
  %src.gep.i325 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i326 = getelementptr i8, ptr %dst, i32 0
  %5 = load i32, ptr %src.gep.i325, align 4
  store i32 %5, ptr %dst.gep.i326, align 4
  %src.gep.i87 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i88 = getelementptr i8, ptr %dst, i32 4
  %6 = load i8, ptr %src.gep.i87, align 1
  store i8 %6, ptr %dst.gep.i88, align 1
  br label %return

sw.bb6:                                           ; preds = %entry
  %src.gep.i329 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3210 = getelementptr i8, ptr %dst, i32 0
  %7 = load i32, ptr %src.gep.i329, align 4
  store i32 %7, ptr %dst.gep.i3210, align 4
  %src.gep.i1611 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1612 = getelementptr i8, ptr %dst, i32 4
  %8 = load i16, ptr %src.gep.i1611, align 2
  store i16 %8, ptr %dst.gep.i1612, align 2
  br label %return

sw.bb7:                                           ; preds = %entry
  %src.gep.i3213 = getelementptr i8, ptr %src, i32 0
  %dst.gep.i3214 = getelementptr i8, ptr %dst, i32 0
  %9 = load i32, ptr %src.gep.i3213, align 4
  store i32 %9, ptr %dst.gep.i3214, align 4
  %src.gep.i1615 = getelementptr i8, ptr %src, i32 4
  %dst.gep.i1616 = getelementptr i8, ptr %dst, i32 4
  %10 = load i16, ptr %src.gep.i1615, align 2
  store i16 %10, ptr %dst.gep.i1616, align 2
  %src.gep.i817 = getelementptr i8, ptr %src, i32 6
  %dst.gep.i818 = getelementptr i8, ptr %dst, i32 6
  %11 = load i8, ptr %src.gep.i817, align 1
  store i8 %11, ptr %dst.gep.i818, align 1
  br label %return
}

; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: readwrite)
declare void @llvm.memcpy.p0.p0.i64(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i64, i1 immarg) #3

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc16Dst16Const16(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc16Dst16Const16(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*]]:
; CHECK-NEXT:    [[TMP3:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[TMP4:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[TMP4]], label %[[FOR_COND_CLEANUP:.*]], label %[[FOR_BODY:.*]]
; CHECK:       [[FOR_BODY]]:
; CHECK-NEXT:    [[TMP5:%.*]] = phi i32 [ 0, %[[ENTRY]] ], [ [[TMP6:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[SRC_PTR_LOOP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLD128IP7:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_LOOP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VST128IP14:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLD128IP:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_LOOP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP1:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP2:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP1]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP3:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP2]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP4:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP3]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP5:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP4]], i32 16, i32 5)
; CHECK-NEXT:    [[VLD128IP6:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP5]], i32 16, i32 6)
; CHECK-NEXT:    [[VLD128IP7]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP6]], i32 16, i32 7)
; CHECK-NEXT:    [[VST128IP:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_LOOP]], i32 16)
; CHECK-NEXT:    [[VST128IP8:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP]], i32 16)
; CHECK-NEXT:    [[VST128IP9:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP8]], i32 16)
; CHECK-NEXT:    [[VST128IP10:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP9]], i32 16)
; CHECK-NEXT:    [[VST128IP11:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP10]], i32 16)
; CHECK-NEXT:    [[VST128IP12:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP11]], i32 16)
; CHECK-NEXT:    [[VST128IP13:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 [[VST128IP12]], i32 16)
; CHECK-NEXT:    [[VST128IP14]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 [[VST128IP13]], i32 16)
; CHECK-NEXT:    [[TMP6]] = add nuw nsw i32 [[TMP5]], 1
; CHECK-NEXT:    [[TMP7:%.*]] = icmp eq i32 [[TMP6]], [[TMP3]]
; CHECK-NEXT:    br i1 [[TMP7]], label %[[FOR_COND_CLEANUP]], label %[[FOR_BODY]]
; CHECK:       [[FOR_COND_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLD128IP7]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VST128IP14]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLD128IP15:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP16:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP15]], i32 16, i32 1)
; CHECK-NEXT:    [[VST128IP17:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP18:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP17]], i32 16)
; CHECK-NEXT:    ret void
;
entry:
  %3 = lshr i32 %2, 7
  %4 = icmp ult i32 %2, 128
  br i1 %4, label %for.cond.cleanup, label %for.body

for.body:                                         ; preds = %for.body, %entry
  %5 = phi i32 [ 0, %entry ], [ %6, %for.body ]
  %src.ptr.loop = phi i32 [ %1, %entry ], [ %vld128ip7, %for.body ]
  %dst.ptr.loop = phi i32 [ %0, %entry ], [ %vst128ip14, %for.body ]
  %vld128ip = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.loop, i32 16, i32 0)
  %vld128ip1 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip, i32 16, i32 1)
  %vld128ip2 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip1, i32 16, i32 2)
  %vld128ip3 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip2, i32 16, i32 3)
  %vld128ip4 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip3, i32 16, i32 4)
  %vld128ip5 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip4, i32 16, i32 5)
  %vld128ip6 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip5, i32 16, i32 6)
  %vld128ip7 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip6, i32 16, i32 7)
  %vst128ip = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.loop, i32 16)
  %vst128ip8 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip, i32 16)
  %vst128ip9 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip8, i32 16)
  %vst128ip10 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip9, i32 16)
  %vst128ip11 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip10, i32 16)
  %vst128ip12 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip11, i32 16)
  %vst128ip13 = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 %vst128ip12, i32 16)
  %vst128ip14 = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 %vst128ip13, i32 16)
  %6 = add nuw nsw i32 %5, 1
  %7 = icmp eq i32 %6, %3
  br i1 %7, label %for.cond.cleanup, label %for.body

for.cond.cleanup:                                 ; preds = %for.body, %entry
  %src.ptr.cleanup = phi i32 [ %1, %entry ], [ %vld128ip7, %for.body ]
  %dst.ptr.cleanup = phi i32 [ %0, %entry ], [ %vst128ip14, %for.body ]
  %vld128ip15 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.cleanup, i32 16, i32 0)
  %vld128ip16 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip15, i32 16, i32 1)
  %vst128ip17 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.cleanup, i32 16)
  %vst128ip18 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip17, i32 16)
  ret void
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc16Dst8Const16(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc16Dst8Const16(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*]]:
; CHECK-NEXT:    [[TMP3:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[TMP4:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[TMP4]], label %[[FOR_COND_CLEANUP:.*]], label %[[FOR_BODY:.*]]
; CHECK:       [[FOR_BODY]]:
; CHECK-NEXT:    [[TMP5:%.*]] = phi i32 [ 0, %[[ENTRY]] ], [ [[TMP6:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[SRC_PTR_LOOP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLD128IP7:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_LOOP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VSTH64IP21:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLD128IP:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_LOOP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP1:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP]], i32 16, i32 1)
; CHECK-NEXT:    [[VLD128IP2:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP1]], i32 16, i32 2)
; CHECK-NEXT:    [[VLD128IP3:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP2]], i32 16, i32 3)
; CHECK-NEXT:    [[VLD128IP4:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP3]], i32 16, i32 4)
; CHECK-NEXT:    [[VLD128IP5:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP4]], i32 16, i32 5)
; CHECK-NEXT:    [[VLD128IP6:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP5]], i32 16, i32 6)
; CHECK-NEXT:    [[VLD128IP7]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP6]], i32 16, i32 7)
; CHECK-NEXT:    [[VSTL64IP:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_LOOP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP]], i32 8)
; CHECK-NEXT:    [[VSTL64IP8:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP9:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP8]], i32 8)
; CHECK-NEXT:    [[VSTL64IP10:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP9]], i32 8)
; CHECK-NEXT:    [[VSTH64IP11:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP10]], i32 8)
; CHECK-NEXT:    [[VSTL64IP12:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP11]], i32 8)
; CHECK-NEXT:    [[VSTH64IP13:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP12]], i32 8)
; CHECK-NEXT:    [[VSTL64IP14:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP13]], i32 8)
; CHECK-NEXT:    [[VSTH64IP15:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP14]], i32 8)
; CHECK-NEXT:    [[VSTL64IP16:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP15]], i32 8)
; CHECK-NEXT:    [[VSTH64IP17:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP16]], i32 8)
; CHECK-NEXT:    [[VSTL64IP18:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 [[VSTH64IP17]], i32 8)
; CHECK-NEXT:    [[VSTH64IP19:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 [[VSTL64IP18]], i32 8)
; CHECK-NEXT:    [[VSTL64IP20:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 [[VSTH64IP19]], i32 8)
; CHECK-NEXT:    [[VSTH64IP21]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 [[VSTL64IP20]], i32 8)
; CHECK-NEXT:    [[TMP6]] = add nuw nsw i32 [[TMP5]], 1
; CHECK-NEXT:    [[TMP7:%.*]] = icmp eq i32 [[TMP6]], [[TMP3]]
; CHECK-NEXT:    br i1 [[TMP7]], label %[[FOR_COND_CLEANUP]], label %[[FOR_BODY]]
; CHECK:       [[FOR_COND_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLD128IP7]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VSTH64IP21]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLD128IP22:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[SRC_PTR_CLEANUP]], i32 16, i32 0)
; CHECK-NEXT:    [[VLD128IP23:%.*]] = call i32 @llvm.riscv.esp.vld.128.ip(i32 [[VLD128IP22]], i32 16, i32 1)
; CHECK-NEXT:    [[VSTL64IP24:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP25:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP24]], i32 8)
; CHECK-NEXT:    [[VSTL64IP26:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP25]], i32 8)
; CHECK-NEXT:    [[VSTH64IP27:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP26]], i32 8)
; CHECK-NEXT:    ret void
;
entry:
  %3 = lshr i32 %2, 7
  %4 = icmp ult i32 %2, 128
  br i1 %4, label %for.cond.cleanup, label %for.body

for.body:                                         ; preds = %for.body, %entry
  %5 = phi i32 [ 0, %entry ], [ %6, %for.body ]
  %src.ptr.loop = phi i32 [ %1, %entry ], [ %vld128ip7, %for.body ]
  %dst.ptr.loop = phi i32 [ %0, %entry ], [ %vsth64ip21, %for.body ]
  %vld128ip = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.loop, i32 16, i32 0)
  %vld128ip1 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip, i32 16, i32 1)
  %vld128ip2 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip1, i32 16, i32 2)
  %vld128ip3 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip2, i32 16, i32 3)
  %vld128ip4 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip3, i32 16, i32 4)
  %vld128ip5 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip4, i32 16, i32 5)
  %vld128ip6 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip5, i32 16, i32 6)
  %vld128ip7 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip6, i32 16, i32 7)
  %vstl64ip = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.loop, i32 8)
  %vsth64ip = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip, i32 8)
  %vstl64ip8 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip, i32 8)
  %vsth64ip9 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip8, i32 8)
  %vstl64ip10 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip9, i32 8)
  %vsth64ip11 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip10, i32 8)
  %vstl64ip12 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip11, i32 8)
  %vsth64ip13 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip12, i32 8)
  %vstl64ip14 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip13, i32 8)
  %vsth64ip15 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip14, i32 8)
  %vstl64ip16 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip15, i32 8)
  %vsth64ip17 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip16, i32 8)
  %vstl64ip18 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 %vsth64ip17, i32 8)
  %vsth64ip19 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 %vstl64ip18, i32 8)
  %vstl64ip20 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 %vsth64ip19, i32 8)
  %vsth64ip21 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 %vstl64ip20, i32 8)
  %6 = add nuw nsw i32 %5, 1
  %7 = icmp eq i32 %6, %3
  br i1 %7, label %for.cond.cleanup, label %for.body

for.cond.cleanup:                                 ; preds = %for.body, %entry
  %src.ptr.cleanup = phi i32 [ %1, %entry ], [ %vld128ip7, %for.body ]
  %dst.ptr.cleanup = phi i32 [ %0, %entry ], [ %vsth64ip21, %for.body ]
  %vld128ip22 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %src.ptr.cleanup, i32 16, i32 0)
  %vld128ip23 = call i32 @llvm.riscv.esp.vld.128.ip(i32 %vld128ip22, i32 16, i32 1)
  %vstl64ip24 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.cleanup, i32 8)
  %vsth64ip25 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip24, i32 8)
  %vstl64ip26 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip25, i32 8)
  %vsth64ip27 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip26, i32 8)
  ret void
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc8Dst16Const16(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc8Dst16Const16(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*]]:
; CHECK-NEXT:    [[TMP3:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[TMP4:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[TMP4]], label %[[FOR_COND_CLEANUP:.*]], label %[[FOR_BODY:.*]]
; CHECK:       [[FOR_BODY]]:
; CHECK-NEXT:    [[TMP5:%.*]] = phi i32 [ 0, %[[ENTRY]] ], [ [[TMP6:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[SRC_PTR_LOOP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLDH64IP14:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_LOOP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VST128IP21:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLDL64IP:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_LOOP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP1:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP2:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP1]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP3:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP2]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP4:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP3]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP5:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP4]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP6:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP5]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP7:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP6]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP8:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP7]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP9:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP8]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP10:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP9]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDL64IP11:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP10]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDH64IP12:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP11]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDL64IP13:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP12]], i32 8, i32 7)
; CHECK-NEXT:    [[VLDH64IP14]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP13]], i32 8, i32 7)
; CHECK-NEXT:    [[VST128IP:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_LOOP]], i32 16)
; CHECK-NEXT:    [[VST128IP15:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP]], i32 16)
; CHECK-NEXT:    [[VST128IP16:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 [[VST128IP15]], i32 16)
; CHECK-NEXT:    [[VST128IP17:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 [[VST128IP16]], i32 16)
; CHECK-NEXT:    [[VST128IP18:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 [[VST128IP17]], i32 16)
; CHECK-NEXT:    [[VST128IP19:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 [[VST128IP18]], i32 16)
; CHECK-NEXT:    [[VST128IP20:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 [[VST128IP19]], i32 16)
; CHECK-NEXT:    [[VST128IP21]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 [[VST128IP20]], i32 16)
; CHECK-NEXT:    [[TMP6]] = add nuw nsw i32 [[TMP5]], 1
; CHECK-NEXT:    [[TMP7:%.*]] = icmp eq i32 [[TMP6]], [[TMP3]]
; CHECK-NEXT:    br i1 [[TMP7]], label %[[FOR_COND_CLEANUP]], label %[[FOR_BODY]]
; CHECK:       [[FOR_COND_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLDH64IP14]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VST128IP21]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLDL64IP22:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP23:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP22]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP24:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP23]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP25:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP24]], i32 8, i32 1)
; CHECK-NEXT:    [[VST128IP26:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 [[DST_PTR_CLEANUP]], i32 16)
; CHECK-NEXT:    [[VST128IP27:%.*]] = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 [[VST128IP26]], i32 16)
; CHECK-NEXT:    ret void
;
entry:
  %3 = lshr i32 %2, 7
  %4 = icmp ult i32 %2, 128
  br i1 %4, label %for.cond.cleanup, label %for.body

for.body:                                         ; preds = %for.body, %entry
  %5 = phi i32 [ 0, %entry ], [ %6, %for.body ]
  %src.ptr.loop = phi i32 [ %1, %entry ], [ %vldh64ip14, %for.body ]
  %dst.ptr.loop = phi i32 [ %0, %entry ], [ %vst128ip21, %for.body ]
  %vldl64ip = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.loop, i32 8, i32 0)
  %vldh64ip = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip, i32 8, i32 0)
  %vldl64ip1 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip, i32 8, i32 1)
  %vldh64ip2 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip1, i32 8, i32 1)
  %vldl64ip3 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip2, i32 8, i32 2)
  %vldh64ip4 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip3, i32 8, i32 2)
  %vldl64ip5 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip4, i32 8, i32 3)
  %vldh64ip6 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip5, i32 8, i32 3)
  %vldl64ip7 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip6, i32 8, i32 4)
  %vldh64ip8 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip7, i32 8, i32 4)
  %vldl64ip9 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip8, i32 8, i32 5)
  %vldh64ip10 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip9, i32 8, i32 5)
  %vldl64ip11 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip10, i32 8, i32 6)
  %vldh64ip12 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip11, i32 8, i32 6)
  %vldl64ip13 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip12, i32 8, i32 7)
  %vldh64ip14 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip13, i32 8, i32 7)
  %vst128ip = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.loop, i32 16)
  %vst128ip15 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip, i32 16)
  %vst128ip16 = call i32 @llvm.riscv.esp.vst.128.ip(i32 2, i32 %vst128ip15, i32 16)
  %vst128ip17 = call i32 @llvm.riscv.esp.vst.128.ip(i32 3, i32 %vst128ip16, i32 16)
  %vst128ip18 = call i32 @llvm.riscv.esp.vst.128.ip(i32 4, i32 %vst128ip17, i32 16)
  %vst128ip19 = call i32 @llvm.riscv.esp.vst.128.ip(i32 5, i32 %vst128ip18, i32 16)
  %vst128ip20 = call i32 @llvm.riscv.esp.vst.128.ip(i32 6, i32 %vst128ip19, i32 16)
  %vst128ip21 = call i32 @llvm.riscv.esp.vst.128.ip(i32 7, i32 %vst128ip20, i32 16)
  %6 = add nuw nsw i32 %5, 1
  %7 = icmp eq i32 %6, %3
  br i1 %7, label %for.cond.cleanup, label %for.body

for.cond.cleanup:                                 ; preds = %for.body, %entry
  %src.ptr.cleanup = phi i32 [ %1, %entry ], [ %vldh64ip14, %for.body ]
  %dst.ptr.cleanup = phi i32 [ %0, %entry ], [ %vst128ip21, %for.body ]
  %vldl64ip22 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.cleanup, i32 8, i32 0)
  %vldh64ip23 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip22, i32 8, i32 0)
  %vldl64ip24 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip23, i32 8, i32 1)
  %vldh64ip25 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip24, i32 8, i32 1)
  %vst128ip26 = call i32 @llvm.riscv.esp.vst.128.ip(i32 0, i32 %dst.ptr.cleanup, i32 16)
  %vst128ip27 = call i32 @llvm.riscv.esp.vst.128.ip(i32 1, i32 %vst128ip26, i32 16)
  ret void
}

; Function Attrs: noinline nounwind
define internal void @esp32p4MemCpySrc8Dst8Const16(i32 %0, i32 %1, i32 %2)  {
; CHECK-LABEL: define internal void @esp32p4MemCpySrc8Dst8Const16(
; CHECK-SAME: i32 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*]]:
; CHECK-NEXT:    [[TMP3:%.*]] = lshr i32 [[TMP2]], 7
; CHECK-NEXT:    [[TMP4:%.*]] = icmp ult i32 [[TMP2]], 128
; CHECK-NEXT:    br i1 [[TMP4]], label %[[FOR_COND_CLEANUP:.*]], label %[[FOR_BODY:.*]]
; CHECK:       [[FOR_BODY]]:
; CHECK-NEXT:    [[TMP5:%.*]] = phi i32 [ 0, %[[ENTRY]] ], [ [[TMP6:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[SRC_PTR_LOOP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLDH64IP14:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_LOOP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VSTH64IP28:%.*]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLDL64IP:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_LOOP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP1:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP2:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP1]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDL64IP3:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP2]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDH64IP4:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP3]], i32 8, i32 2)
; CHECK-NEXT:    [[VLDL64IP5:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP4]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDH64IP6:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP5]], i32 8, i32 3)
; CHECK-NEXT:    [[VLDL64IP7:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP6]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDH64IP8:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP7]], i32 8, i32 4)
; CHECK-NEXT:    [[VLDL64IP9:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP8]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDH64IP10:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP9]], i32 8, i32 5)
; CHECK-NEXT:    [[VLDL64IP11:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP10]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDH64IP12:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP11]], i32 8, i32 6)
; CHECK-NEXT:    [[VLDL64IP13:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP12]], i32 8, i32 7)
; CHECK-NEXT:    [[VLDH64IP14]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP13]], i32 8, i32 7)
; CHECK-NEXT:    [[VSTL64IP:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_LOOP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP]], i32 8)
; CHECK-NEXT:    [[VSTL64IP15:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP16:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP15]], i32 8)
; CHECK-NEXT:    [[VSTL64IP17:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 [[VSTH64IP16]], i32 8)
; CHECK-NEXT:    [[VSTH64IP18:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 [[VSTL64IP17]], i32 8)
; CHECK-NEXT:    [[VSTL64IP19:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 [[VSTH64IP18]], i32 8)
; CHECK-NEXT:    [[VSTH64IP20:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 [[VSTL64IP19]], i32 8)
; CHECK-NEXT:    [[VSTL64IP21:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 [[VSTH64IP20]], i32 8)
; CHECK-NEXT:    [[VSTH64IP22:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 [[VSTL64IP21]], i32 8)
; CHECK-NEXT:    [[VSTL64IP23:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 [[VSTH64IP22]], i32 8)
; CHECK-NEXT:    [[VSTH64IP24:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 [[VSTL64IP23]], i32 8)
; CHECK-NEXT:    [[VSTL64IP25:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 [[VSTH64IP24]], i32 8)
; CHECK-NEXT:    [[VSTH64IP26:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 [[VSTL64IP25]], i32 8)
; CHECK-NEXT:    [[VSTL64IP27:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 [[VSTH64IP26]], i32 8)
; CHECK-NEXT:    [[VSTH64IP28]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 [[VSTL64IP27]], i32 8)
; CHECK-NEXT:    [[TMP6]] = add nuw nsw i32 [[TMP5]], 1
; CHECK-NEXT:    [[TMP7:%.*]] = icmp eq i32 [[TMP6]], [[TMP3]]
; CHECK-NEXT:    br i1 [[TMP7]], label %[[FOR_COND_CLEANUP]], label %[[FOR_BODY]]
; CHECK:       [[FOR_COND_CLEANUP]]:
; CHECK-NEXT:    [[SRC_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP1]], %[[ENTRY]] ], [ [[VLDH64IP14]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[DST_PTR_CLEANUP:%.*]] = phi i32 [ [[TMP0]], %[[ENTRY]] ], [ [[VSTH64IP28]], %[[FOR_BODY]] ]
; CHECK-NEXT:    [[VLDL64IP29:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[SRC_PTR_CLEANUP]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDH64IP30:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP29]], i32 8, i32 0)
; CHECK-NEXT:    [[VLDL64IP31:%.*]] = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 [[VLDH64IP30]], i32 8, i32 1)
; CHECK-NEXT:    [[VLDH64IP32:%.*]] = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 [[VLDL64IP31]], i32 8, i32 1)
; CHECK-NEXT:    [[VSTL64IP33:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 [[DST_PTR_CLEANUP]], i32 8)
; CHECK-NEXT:    [[VSTH64IP34:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 [[VSTL64IP33]], i32 8)
; CHECK-NEXT:    [[VSTL64IP35:%.*]] = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 [[VSTH64IP34]], i32 8)
; CHECK-NEXT:    [[VSTH64IP36:%.*]] = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 [[VSTL64IP35]], i32 8)
; CHECK-NEXT:    ret void
;
entry:
  %3 = lshr i32 %2, 7
  %4 = icmp ult i32 %2, 128
  br i1 %4, label %for.cond.cleanup, label %for.body

for.body:                                         ; preds = %for.body, %entry
  %5 = phi i32 [ 0, %entry ], [ %6, %for.body ]
  %src.ptr.loop = phi i32 [ %1, %entry ], [ %vldh64ip14, %for.body ]
  %dst.ptr.loop = phi i32 [ %0, %entry ], [ %vsth64ip28, %for.body ]
  %vldl64ip = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.loop, i32 8, i32 0)
  %vldh64ip = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip, i32 8, i32 0)
  %vldl64ip1 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip, i32 8, i32 1)
  %vldh64ip2 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip1, i32 8, i32 1)
  %vldl64ip3 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip2, i32 8, i32 2)
  %vldh64ip4 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip3, i32 8, i32 2)
  %vldl64ip5 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip4, i32 8, i32 3)
  %vldh64ip6 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip5, i32 8, i32 3)
  %vldl64ip7 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip6, i32 8, i32 4)
  %vldh64ip8 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip7, i32 8, i32 4)
  %vldl64ip9 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip8, i32 8, i32 5)
  %vldh64ip10 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip9, i32 8, i32 5)
  %vldl64ip11 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip10, i32 8, i32 6)
  %vldh64ip12 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip11, i32 8, i32 6)
  %vldl64ip13 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip12, i32 8, i32 7)
  %vldh64ip14 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip13, i32 8, i32 7)
  %vstl64ip = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.loop, i32 8)
  %vsth64ip = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip, i32 8)
  %vstl64ip15 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip, i32 8)
  %vsth64ip16 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip15, i32 8)
  %vstl64ip17 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 2, i32 %vsth64ip16, i32 8)
  %vsth64ip18 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 2, i32 %vstl64ip17, i32 8)
  %vstl64ip19 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 3, i32 %vsth64ip18, i32 8)
  %vsth64ip20 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 3, i32 %vstl64ip19, i32 8)
  %vstl64ip21 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 4, i32 %vsth64ip20, i32 8)
  %vsth64ip22 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 4, i32 %vstl64ip21, i32 8)
  %vstl64ip23 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 5, i32 %vsth64ip22, i32 8)
  %vsth64ip24 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 5, i32 %vstl64ip23, i32 8)
  %vstl64ip25 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 6, i32 %vsth64ip24, i32 8)
  %vsth64ip26 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 6, i32 %vstl64ip25, i32 8)
  %vstl64ip27 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 7, i32 %vsth64ip26, i32 8)
  %vsth64ip28 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 7, i32 %vstl64ip27, i32 8)
  %6 = add nuw nsw i32 %5, 1
  %7 = icmp eq i32 %6, %3
  br i1 %7, label %for.cond.cleanup, label %for.body

for.cond.cleanup:                                 ; preds = %for.body, %entry
  %src.ptr.cleanup = phi i32 [ %1, %entry ], [ %vldh64ip14, %for.body ]
  %dst.ptr.cleanup = phi i32 [ %0, %entry ], [ %vsth64ip28, %for.body ]
  %vldl64ip29 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %src.ptr.cleanup, i32 8, i32 0)
  %vldh64ip30 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip29, i32 8, i32 0)
  %vldl64ip31 = call i32 @llvm.riscv.esp.vld.l.64.ip(i32 %vldh64ip30, i32 8, i32 1)
  %vldh64ip32 = call i32 @llvm.riscv.esp.vld.h.64.ip(i32 %vldl64ip31, i32 8, i32 1)
  %vstl64ip33 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 0, i32 %dst.ptr.cleanup, i32 8)
  %vsth64ip34 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 0, i32 %vstl64ip33, i32 8)
  %vstl64ip35 = call i32 @llvm.riscv.esp.vst.l.64.ip(i32 1, i32 %vsth64ip34, i32 8)
  %vsth64ip36 = call i32 @llvm.riscv.esp.vst.h.64.ip(i32 1, i32 %vstl64ip35, i32 8)
  ret void
}
